{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\komun\\\\booking-app\\\\frontend\\\\src\\\\components\\\\ui\\\\PlanMindMap.tsx\",\n  _s = $RefreshSig$();\n// src/components/ui/PlanMindMap.tsx\nimport React, { useMemo, useState } from 'react';\nimport { ChevronDown, ChevronUp, Lightbulb, Copy, Check } from 'lucide-react';\nimport { Badge } from './badge';\nimport { Button } from './button';\n\n/* ---------- Types ---------- */\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n/* ---------- Local i18n (fallbacks) ---------- */\nconst STR = {\n  en: {\n    step: n => `Step ${n}`,\n    recommendedToolsCount: n => `${n} recommended tools`,\n    assistantSuggestion: 'AI Assistant Suggestion',\n    copyPasteReady: 'Copy & Paste Ready',\n    copy: 'Copy',\n    copied: 'Copied!',\n    promptHint: 'ðŸ’¡ Copy this prompt and paste it into any AI assistant (ChatGPT, Claude, etc.) for personalized guidance on this step.',\n    aiTool: 'AI Tool',\n    available: 'Available',\n    noLink: 'No link',\n    myGoalFallback: 'My goal'\n  },\n  bg: {\n    step: n => `Ð¡Ñ‚ÑŠÐ¿ÐºÐ° ${n}`,\n    recommendedToolsCount: n => `${n} Ð¿Ñ€ÐµÐ¿Ð¾Ñ€ÑŠÑ‡Ð°Ð½Ð¸ Ð¸Ð½ÑÑ‚Ñ€ÑƒÐ¼ÐµÐ½Ñ‚Ð°`,\n    assistantSuggestion: 'ÐŸÑ€ÐµÐ´Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ Ð¾Ñ‚ AI Ð°ÑÐ¸ÑÑ‚ÐµÐ½Ñ‚',\n    copyPasteReady: 'Ð“Ð¾Ñ‚Ð¾Ð²Ð¾ Ð·Ð° ÐºÐ¾Ð¿Ð¸Ñ€Ð°Ð½Ðµ',\n    copy: 'ÐšÐ¾Ð¿Ð¸Ñ€Ð°Ð¹',\n    copied: 'ÐšÐ¾Ð¿Ð¸Ñ€Ð°Ð½Ð¾!',\n    promptHint: 'ðŸ’¡ ÐšÐ¾Ð¿Ð¸Ñ€Ð°Ð¹ Ð¿Ñ€Ð¾Ð¼Ð¿Ñ‚Ð° Ð¸ Ð³Ð¾ Ð¿Ð¾ÑÑ‚Ð°Ð²Ð¸ Ð² AI Ð°ÑÐ¸ÑÑ‚ÐµÐ½Ñ‚ (ChatGPT, Claude Ð¸ Ð´Ñ€.) Ð·Ð° Ð¿ÐµÑ€ÑÐ¾Ð½Ð°Ð»Ð¸Ð·Ð¸Ñ€Ð°Ð½Ð¾ Ñ€ÑŠÐºÐ¾Ð²Ð¾Ð´ÑÑ‚Ð²Ð¾ Ð·Ð° Ñ‚Ð°Ð·Ð¸ ÑÑ‚ÑŠÐ¿ÐºÐ°.',\n    aiTool: 'AI Ð¸Ð½ÑÑ‚Ñ€ÑƒÐ¼ÐµÐ½Ñ‚',\n    available: 'ÐÐ°Ð»Ð¸Ñ‡Ð½Ð¾',\n    noLink: 'ÐÑÐ¼Ð° Ð»Ð¸Ð½Ðº',\n    myGoalFallback: 'ÐœÐ¾ÑÑ‚Ð° Ñ†ÐµÐ»'\n  }\n};\n\n/* ---------- Helpers ---------- */\nfunction detectLanguage(text) {\n  if (!text) return 'en';\n  const cyr = /[Ð°-ÑÑ‘]/i;\n  return cyr.test(text) ? 'bg' : 'en';\n}\nfunction defaultPromptBuilder({\n  goal,\n  stepTitle,\n  tools,\n  language\n}) {\n  const tl = language === 'bg';\n  const goalPart = goal ? tl ? `ÐœÐ¾ÑÑ‚Ð° Ð³Ð»Ð°Ð²Ð½Ð° Ñ†ÐµÐ» Ðµ: \"${goal}\". ` : `My main goal is: \"${goal}\". ` : '';\n  const ctx = tools.length > 0 ? tl ? `Ð¢Ð°Ð·Ð¸ ÑÑ‚ÑŠÐ¿ÐºÐ° Ð²ÐºÐ»ÑŽÑ‡Ð²Ð° ${tools.length} Ð¿Ñ€ÐµÐ¿Ð¾Ñ€ÑŠÑ‡Ð°Ð½Ð¸ Ð¸Ð½ÑÑ‚Ñ€ÑƒÐ¼ÐµÐ½Ñ‚Ð°/Ð¿Ð¾Ð´Ñ…Ð¾Ð´Ð°. ` : `This step involves ${tools.length} recommended tools/approaches. ` : '';\n  return (tl ? 'Ð¢Ð¸ ÑÐ¸ ÐµÐºÑÐ¿ÐµÑ€Ñ‚ÐµÐ½ Ð°ÑÐ¸ÑÑ‚ÐµÐ½Ñ‚, ÐºÐ¾Ð¹Ñ‚Ð¾ Ð¼Ð¸ Ð¿Ð¾Ð¼Ð°Ð³Ð° Ð´Ð° Ð¿Ð¾ÑÑ‚Ð¸Ð³Ð°Ð¼ Ñ†ÐµÐ»Ð¸Ñ‚Ðµ ÑÐ¸. ' : 'You are an expert assistant helping me achieve my goals. ') + goalPart + (tl ? `ÐÑƒÐ¶Ð´Ð°Ñ ÑÐµ Ð¾Ñ‚ Ð¿Ð¾Ð¼Ð¾Ñ‰ ÑÑŠÑ ÑÑ‚ÑŠÐ¿ÐºÐ°Ñ‚Ð°: \"${stepTitle}\". ` : `I need help with the step: \"${stepTitle}\". `) + ctx + (tl ? 'ÐœÐ¾Ð»Ñ, Ð´Ð°Ð¹: 1) ÑÑÐµÐ½ Ð¿Ð»Ð°Ð½ ÑÑ‚ÑŠÐ¿ÐºÐ° Ð¿Ð¾ ÑÑ‚ÑŠÐ¿ÐºÐ°, 2) Ð½Ð°Ð¹-Ð´Ð¾Ð±Ñ€Ð¸ Ð¿Ñ€Ð°ÐºÑ‚Ð¸ÐºÐ¸, 3) Ñ‡ÐµÑÑ‚Ð¸ Ð³Ñ€ÐµÑˆÐºÐ¸ Ð¸ ÐºÐ°Ðº Ð´Ð° Ð³Ð¸ Ð¸Ð·Ð±ÐµÐ³Ð½Ð°, 4) Ð½ÑƒÐ¶Ð½Ð¸ Ð²Ñ…Ð¾Ð´Ð¾Ð²Ðµ Ð¸ Ð¾Ñ‡Ð°ÐºÐ²Ð°Ð½Ð¸ Ð¸Ð·Ñ…Ð¾Ð´Ð¸, 5) ÐºÑ€Ð¸Ñ‚ÐµÑ€Ð¸Ð¸ Ð·Ð° ÐºÐ°Ñ‡ÐµÑÑ‚Ð²Ð¾. ÐÐ°ÐºÑ€Ð°Ñ Ð·Ð°Ð´Ð°Ð¹ 2â€“3 ÑƒÑ‚Ð¾Ñ‡Ð½ÑÐ²Ð°Ñ‰Ð¸ Ð²ÑŠÐ¿Ñ€Ð¾ÑÐ° Ð·Ð° ÐºÐ¾Ð½Ñ‚ÐµÐºÑÑ‚ Ð¸ Ð¸Ð·Ð¸ÑÐºÐ²Ð°Ð½Ð¸Ñ.' : \"Please provide: 1) a clear step-by-step action plan, 2) best practices, 3) common pitfalls and how to avoid them, 4) required inputs and expected outputs, 5) quality criteria. Then ask 2â€“3 clarifying questions about my context and requirements.\");\n}\n\n/* ---------- Component ---------- */\nexport default function PlanMindMap({\n  goal,\n  steps,\n  onOpenTool,\n  t,\n  language,\n  buildPrompt\n}) {\n  _s();\n  // lang & translator\n  const lang = language || detectLanguage(goal || steps.map(s => s.title).join(' '));\n  const L = STR[lang];\n  const tr = key => t ? t(key) : L[key];\n\n  // open/collapse states\n  const [openTools, setOpenTools] = useState(new Set([0])); // Step 1 tools open by default\n  const [openPrompts, setOpenPrompts] = useState(new Set());\n  const [copiedIdx, setCopiedIdx] = useState(null);\n  const headerTitle = useMemo(() => goal || L.myGoalFallback, [goal, lang]);\n  const toggle = (set, idx) => {\n    const next = new Set(set);\n    next.has(idx) ? next.delete(idx) : next.add(idx);\n    return next;\n  };\n  const copyPrompt = async (text, i) => {\n    try {\n      await navigator.clipboard.writeText(text);\n      setCopiedIdx(i);\n      setTimeout(() => setCopiedIdx(null), 1600);\n    } catch {\n      alert(tr('promptHint')); // fallback alert text\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"space-y-6\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-center\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"inline-flex items-center gap-3 bg-white/80 border border-slate-200 rounded-2xl px-4 py-3 shadow-sm\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-slate-700\",\n          children: headerTitle\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 11\n        }, this), goal && /*#__PURE__*/_jsxDEV(Badge, {\n          variant: \"secondary\",\n          className: \"bg-blue-50 text-blue-700 border-blue-200\",\n          children: goal\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"space-y-6\",\n      children: steps.map((step, i) => {\n        const n = i + 1;\n        const stepPillText = tr('step')(n);\n        const toolsOpened = openTools.has(i);\n        const promptOpened = openPrompts.has(i);\n        const promptText = buildPrompt && buildPrompt({\n          goal,\n          stepTitle: step.title,\n          tools: step.tools,\n          language: lang\n        }) || defaultPromptBuilder({\n          goal,\n          stepTitle: step.title,\n          tools: step.tools,\n          language: lang\n        });\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `rounded-2xl border bg-white shadow-sm ${toolsOpened || promptOpened ? 'border-blue-200' : 'border-slate-200'}`,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-start gap-3 px-4 sm:px-5 pt-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: `w-9 h-9 sm:w-10 sm:h-10 rounded-2xl flex items-center justify-center text-white font-bold shadow-md\n                    ${i % 3 === 0 ? 'bg-gradient-to-br from-blue-500 to-indigo-600 shadow-blue-500/25' : i % 3 === 1 ? 'bg-gradient-to-br from-purple-500 to-pink-600 shadow-purple-500/25' : 'bg-gradient-to-br from-emerald-500 to-green-600 shadow-emerald-500/25'}`,\n              children: n\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 170,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex-1 min-w-0 pb-4\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-slate-800 font-semibold truncate\",\n                children: step.title\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 181,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-xs text-slate-500\",\n                children: tr('recommendedToolsCount')(step.tools.length)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 182,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 180,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center gap-2 pb-4\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => setOpenPrompts(s => toggle(s, i)),\n                className: `inline-flex items-center gap-2 px-3 h-9 rounded-xl text-white shadow-sm transition relative\n                      ${promptOpened ? 'bg-orange-500' : 'bg-gradient-to-r from-amber-400 to-orange-500 hover:from-amber-500 hover:to-orange-600'}\n                    `,\n                title: tr('assistantSuggestion'),\n                children: [/*#__PURE__*/_jsxDEV(Lightbulb, {\n                  className: \"w-4 h-4\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 197,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-sm font-medium hidden sm:inline\",\n                  children: tr('assistantSuggestion')\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 198,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 190,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => setOpenTools(s => toggle(s, i)),\n                className: \"inline-flex items-center gap-2 px-3 h-9 rounded-xl bg-slate-100 text-slate-700 hover:bg-slate-200 border border-slate-200\",\n                title: stepPillText,\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-sm font-medium\",\n                  children: stepPillText\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 207,\n                  columnNumber: 21\n                }, this), toolsOpened ? /*#__PURE__*/_jsxDEV(ChevronUp, {\n                  className: \"w-4 h-4\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 208,\n                  columnNumber: 36\n                }, this) : /*#__PURE__*/_jsxDEV(ChevronDown, {\n                  className: \"w-4 h-4\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 208,\n                  columnNumber: 72\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 202,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 188,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 168,\n            columnNumber: 15\n          }, this), promptOpened && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"px-4 sm:px-5 pb-4\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"bg-gradient-to-r from-amber-50 to-orange-50 border border-amber-200/60 rounded-xl p-4\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-start gap-3\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"w-9 h-9 rounded-lg bg-gradient-to-br from-amber-400 to-orange-500 text-white flex items-center justify-center flex-shrink-0\",\n                  children: /*#__PURE__*/_jsxDEV(Lightbulb, {\n                    className: \"w-4 h-4\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 219,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 218,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex-1\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center gap-2 mb-2\",\n                    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"font-semibold text-amber-800\",\n                      children: tr('assistantSuggestion')\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 223,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(Badge, {\n                      variant: \"secondary\",\n                      className: \"text-xs bg-amber-100 text-amber-700 border-amber-200\",\n                      children: tr('copyPasteReady')\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 224,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 222,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"bg-white/80 border border-amber-200 rounded-lg p-3 text-sm text-slate-700\",\n                    children: promptText\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 232,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"mt-2 flex items-center justify-between\",\n                    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"text-xs text-amber-700\",\n                      children: tr('promptHint')\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 237,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(Button, {\n                      variant: \"outline\",\n                      onClick: () => copyPrompt(promptText, i),\n                      className: `h-8 px-3 rounded-lg border-amber-200 ${copiedIdx === i ? 'bg-green-50 border-green-200 text-green-700' : 'text-amber-700 hover:bg-amber-50'}`,\n                      children: [copiedIdx === i ? /*#__PURE__*/_jsxDEV(Check, {\n                        className: \"w-4 h-4 mr-1\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 247,\n                        columnNumber: 48\n                      }, this) : /*#__PURE__*/_jsxDEV(Copy, {\n                        className: \"w-4 h-4 mr-1\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 247,\n                        columnNumber: 85\n                      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"text-xs font-medium\",\n                        children: copiedIdx === i ? tr('copied') : tr('copy')\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 248,\n                        columnNumber: 29\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 238,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 236,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 221,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 217,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 216,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 215,\n            columnNumber: 17\n          }, this), toolsOpened && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"px-4 sm:px-5 pb-5\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"grid sm:grid-cols-2 lg:grid-cols-3 gap-4\",\n              children: step.tools.map(tool => /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => tool.link && onOpenTool(tool),\n                className: `flex items-center gap-3 rounded-xl border p-3 text-left transition ${tool.link ? 'bg-white border-slate-200 hover:shadow-md hover:-translate-y-[2px]' : 'bg-slate-50 border-slate-200 opacity-70 cursor-default'}`,\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"w-10 h-10 rounded-xl bg-gradient-to-br from-blue-400 to-indigo-500 flex items-center justify-center overflow-hidden\",\n                  children: tool.icon ? /*#__PURE__*/_jsxDEV(\"img\", {\n                    src: tool.icon,\n                    alt: tool.name,\n                    className: \"w-6 h-6 object-contain\",\n                    referrerPolicy: \"no-referrer\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 275,\n                    columnNumber: 29\n                  }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-white text-sm font-semibold\",\n                    children: tool.name.slice(0, 1)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 282,\n                    columnNumber: 29\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 273,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex-1 min-w-0\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"font-medium text-slate-800 truncate\",\n                    children: tool.name\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 286,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"text-xs text-slate-500 truncate\",\n                    children: tool.link ? L.available : L.noLink\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 287,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 285,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(Badge, {\n                  variant: \"secondary\",\n                  className: \"text-[10px] bg-blue-50 text-blue-700 border-blue-200\",\n                  children: L.aiTool\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 291,\n                  columnNumber: 25\n                }, this)]\n              }, `${step.title}-${tool.name}`, true, {\n                fileName: _jsxFileName,\n                lineNumber: 264,\n                columnNumber: 23\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 262,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 261,\n            columnNumber: 17\n          }, this)]\n        }, `${step.title}-${i}`, true, {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 13\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 135,\n    columnNumber: 5\n  }, this);\n}\n_s(PlanMindMap, \"6RhjVdE80XwjZ+7K8GW/ZdQzadc=\");\n_c = PlanMindMap;\nvar _c;\n$RefreshReg$(_c, \"PlanMindMap\");","map":{"version":3,"names":["React","useMemo","useState","ChevronDown","ChevronUp","Lightbulb","Copy","Check","Badge","Button","jsxDEV","_jsxDEV","STR","en","step","n","recommendedToolsCount","assistantSuggestion","copyPasteReady","copy","copied","promptHint","aiTool","available","noLink","myGoalFallback","bg","detectLanguage","text","cyr","test","defaultPromptBuilder","goal","stepTitle","tools","language","tl","goalPart","ctx","length","PlanMindMap","steps","onOpenTool","t","buildPrompt","_s","lang","map","s","title","join","L","tr","key","openTools","setOpenTools","Set","openPrompts","setOpenPrompts","copiedIdx","setCopiedIdx","headerTitle","toggle","set","idx","next","has","delete","add","copyPrompt","i","navigator","clipboard","writeText","setTimeout","alert","className","children","fileName","_jsxFileName","lineNumber","columnNumber","variant","stepPillText","toolsOpened","promptOpened","promptText","onClick","tool","link","icon","src","alt","name","referrerPolicy","slice","_c","$RefreshReg$"],"sources":["C:/Users/komun/booking-app/frontend/src/components/ui/PlanMindMap.tsx"],"sourcesContent":["// src/components/ui/PlanMindMap.tsx\r\nimport React, { useMemo, useState } from 'react';\r\nimport { ChevronDown, ChevronUp, Lightbulb, Copy, Check } from 'lucide-react';\r\nimport { Badge } from './badge';\r\nimport { Button } from './button';\r\n\r\n/* ---------- Types ---------- */\r\ntype Tool = { name: string; link?: string | null; icon?: string | null };\r\ntype Group = { title: string; tools: Tool[] };\r\ntype Language = 'en' | 'bg';\r\n\r\ntype PlanMindMapProps = {\r\n  goal: string;\r\n  steps: Group[];\r\n  onOpenTool: (tool: Tool) => void;\r\n\r\n  // Optional i18n bridge from App (safe; prevents TS errors if omitted)\r\n  t?: (key: string) => string;\r\n  language?: Language;\r\n\r\n  // Optional prompt builder from App\r\n  buildPrompt?: (args: { goal: string; stepTitle: string; tools: Tool[]; language: Language }) => string;\r\n};\r\n\r\n/* ---------- Local i18n (fallbacks) ---------- */\r\nconst STR = {\r\n  en: {\r\n    step: (n: number) => `Step ${n}`,\r\n    recommendedToolsCount: (n: number) => `${n} recommended tools`,\r\n    assistantSuggestion: 'AI Assistant Suggestion',\r\n    copyPasteReady: 'Copy & Paste Ready',\r\n    copy: 'Copy',\r\n    copied: 'Copied!',\r\n    promptHint:\r\n      'ðŸ’¡ Copy this prompt and paste it into any AI assistant (ChatGPT, Claude, etc.) for personalized guidance on this step.',\r\n    aiTool: 'AI Tool',\r\n    available: 'Available',\r\n    noLink: 'No link',\r\n    myGoalFallback: 'My goal',\r\n  },\r\n  bg: {\r\n    step: (n: number) => `Ð¡Ñ‚ÑŠÐ¿ÐºÐ° ${n}`,\r\n    recommendedToolsCount: (n: number) => `${n} Ð¿Ñ€ÐµÐ¿Ð¾Ñ€ÑŠÑ‡Ð°Ð½Ð¸ Ð¸Ð½ÑÑ‚Ñ€ÑƒÐ¼ÐµÐ½Ñ‚Ð°`,\r\n    assistantSuggestion: 'ÐŸÑ€ÐµÐ´Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ Ð¾Ñ‚ AI Ð°ÑÐ¸ÑÑ‚ÐµÐ½Ñ‚',\r\n    copyPasteReady: 'Ð“Ð¾Ñ‚Ð¾Ð²Ð¾ Ð·Ð° ÐºÐ¾Ð¿Ð¸Ñ€Ð°Ð½Ðµ',\r\n    copy: 'ÐšÐ¾Ð¿Ð¸Ñ€Ð°Ð¹',\r\n    copied: 'ÐšÐ¾Ð¿Ð¸Ñ€Ð°Ð½Ð¾!',\r\n    promptHint:\r\n      'ðŸ’¡ ÐšÐ¾Ð¿Ð¸Ñ€Ð°Ð¹ Ð¿Ñ€Ð¾Ð¼Ð¿Ñ‚Ð° Ð¸ Ð³Ð¾ Ð¿Ð¾ÑÑ‚Ð°Ð²Ð¸ Ð² AI Ð°ÑÐ¸ÑÑ‚ÐµÐ½Ñ‚ (ChatGPT, Claude Ð¸ Ð´Ñ€.) Ð·Ð° Ð¿ÐµÑ€ÑÐ¾Ð½Ð°Ð»Ð¸Ð·Ð¸Ñ€Ð°Ð½Ð¾ Ñ€ÑŠÐºÐ¾Ð²Ð¾Ð´ÑÑ‚Ð²Ð¾ Ð·Ð° Ñ‚Ð°Ð·Ð¸ ÑÑ‚ÑŠÐ¿ÐºÐ°.',\r\n    aiTool: 'AI Ð¸Ð½ÑÑ‚Ñ€ÑƒÐ¼ÐµÐ½Ñ‚',\r\n    available: 'ÐÐ°Ð»Ð¸Ñ‡Ð½Ð¾',\r\n    noLink: 'ÐÑÐ¼Ð° Ð»Ð¸Ð½Ðº',\r\n    myGoalFallback: 'ÐœÐ¾ÑÑ‚Ð° Ñ†ÐµÐ»',\r\n  },\r\n};\r\n\r\n/* ---------- Helpers ---------- */\r\nfunction detectLanguage(text: string): Language {\r\n  if (!text) return 'en';\r\n  const cyr = /[Ð°-ÑÑ‘]/i;\r\n  return cyr.test(text) ? 'bg' : 'en';\r\n}\r\n\r\nfunction defaultPromptBuilder({\r\n  goal,\r\n  stepTitle,\r\n  tools,\r\n  language,\r\n}: {\r\n  goal: string;\r\n  stepTitle: string;\r\n  tools: Tool[];\r\n  language: Language;\r\n}) {\r\n  const tl = language === 'bg';\r\n  const goalPart = goal ? (tl ? `ÐœÐ¾ÑÑ‚Ð° Ð³Ð»Ð°Ð²Ð½Ð° Ñ†ÐµÐ» Ðµ: \"${goal}\". ` : `My main goal is: \"${goal}\". `) : '';\r\n  const ctx =\r\n    tools.length > 0\r\n      ? tl\r\n        ? `Ð¢Ð°Ð·Ð¸ ÑÑ‚ÑŠÐ¿ÐºÐ° Ð²ÐºÐ»ÑŽÑ‡Ð²Ð° ${tools.length} Ð¿Ñ€ÐµÐ¿Ð¾Ñ€ÑŠÑ‡Ð°Ð½Ð¸ Ð¸Ð½ÑÑ‚Ñ€ÑƒÐ¼ÐµÐ½Ñ‚Ð°/Ð¿Ð¾Ð´Ñ…Ð¾Ð´Ð°. `\r\n        : `This step involves ${tools.length} recommended tools/approaches. `\r\n      : '';\r\n\r\n  return (\r\n    (tl\r\n      ? 'Ð¢Ð¸ ÑÐ¸ ÐµÐºÑÐ¿ÐµÑ€Ñ‚ÐµÐ½ Ð°ÑÐ¸ÑÑ‚ÐµÐ½Ñ‚, ÐºÐ¾Ð¹Ñ‚Ð¾ Ð¼Ð¸ Ð¿Ð¾Ð¼Ð°Ð³Ð° Ð´Ð° Ð¿Ð¾ÑÑ‚Ð¸Ð³Ð°Ð¼ Ñ†ÐµÐ»Ð¸Ñ‚Ðµ ÑÐ¸. '\r\n      : 'You are an expert assistant helping me achieve my goals. ') +\r\n    goalPart +\r\n    (tl ? `ÐÑƒÐ¶Ð´Ð°Ñ ÑÐµ Ð¾Ñ‚ Ð¿Ð¾Ð¼Ð¾Ñ‰ ÑÑŠÑ ÑÑ‚ÑŠÐ¿ÐºÐ°Ñ‚Ð°: \"${stepTitle}\". ` : `I need help with the step: \"${stepTitle}\". `) +\r\n    ctx +\r\n    (tl\r\n      ? 'ÐœÐ¾Ð»Ñ, Ð´Ð°Ð¹: 1) ÑÑÐµÐ½ Ð¿Ð»Ð°Ð½ ÑÑ‚ÑŠÐ¿ÐºÐ° Ð¿Ð¾ ÑÑ‚ÑŠÐ¿ÐºÐ°, 2) Ð½Ð°Ð¹-Ð´Ð¾Ð±Ñ€Ð¸ Ð¿Ñ€Ð°ÐºÑ‚Ð¸ÐºÐ¸, 3) Ñ‡ÐµÑÑ‚Ð¸ Ð³Ñ€ÐµÑˆÐºÐ¸ Ð¸ ÐºÐ°Ðº Ð´Ð° Ð³Ð¸ Ð¸Ð·Ð±ÐµÐ³Ð½Ð°, 4) Ð½ÑƒÐ¶Ð½Ð¸ Ð²Ñ…Ð¾Ð´Ð¾Ð²Ðµ Ð¸ Ð¾Ñ‡Ð°ÐºÐ²Ð°Ð½Ð¸ Ð¸Ð·Ñ…Ð¾Ð´Ð¸, 5) ÐºÑ€Ð¸Ñ‚ÐµÑ€Ð¸Ð¸ Ð·Ð° ÐºÐ°Ñ‡ÐµÑÑ‚Ð²Ð¾. ÐÐ°ÐºÑ€Ð°Ñ Ð·Ð°Ð´Ð°Ð¹ 2â€“3 ÑƒÑ‚Ð¾Ñ‡Ð½ÑÐ²Ð°Ñ‰Ð¸ Ð²ÑŠÐ¿Ñ€Ð¾ÑÐ° Ð·Ð° ÐºÐ¾Ð½Ñ‚ÐµÐºÑÑ‚ Ð¸ Ð¸Ð·Ð¸ÑÐºÐ²Ð°Ð½Ð¸Ñ.'\r\n      : \"Please provide: 1) a clear step-by-step action plan, 2) best practices, 3) common pitfalls and how to avoid them, 4) required inputs and expected outputs, 5) quality criteria. Then ask 2â€“3 clarifying questions about my context and requirements.\")\r\n  );\r\n}\r\n\r\n/* ---------- Component ---------- */\r\nexport default function PlanMindMap({\r\n  goal,\r\n  steps,\r\n  onOpenTool,\r\n  t,\r\n  language,\r\n  buildPrompt,\r\n}: PlanMindMapProps) {\r\n  // lang & translator\r\n  const lang: Language = language || detectLanguage(goal || steps.map(s => s.title).join(' '));\r\n  const L = STR[lang];\r\n  const tr = (key: keyof typeof L): any => (t ? t(key) : L[key]);\r\n\r\n  // open/collapse states\r\n  const [openTools, setOpenTools] = useState<Set<number>>(new Set([0])); // Step 1 tools open by default\r\n  const [openPrompts, setOpenPrompts] = useState<Set<number>>(new Set());\r\n  const [copiedIdx, setCopiedIdx] = useState<number | null>(null);\r\n\r\n  const headerTitle = useMemo(() => goal || L.myGoalFallback, [goal, lang]);\r\n\r\n  const toggle = (set: Set<number>, idx: number) => {\r\n    const next = new Set(set);\r\n    next.has(idx) ? next.delete(idx) : next.add(idx);\r\n    return next;\r\n  };\r\n\r\n  const copyPrompt = async (text: string, i: number) => {\r\n    try {\r\n      await navigator.clipboard.writeText(text);\r\n      setCopiedIdx(i);\r\n      setTimeout(() => setCopiedIdx(null), 1600);\r\n    } catch {\r\n      alert(tr('promptHint')); // fallback alert text\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Goal header */}\r\n      <div className=\"text-center\">\r\n        <div className=\"inline-flex items-center gap-3 bg-white/80 border border-slate-200 rounded-2xl px-4 py-3 shadow-sm\">\r\n          <span className=\"text-slate-700\">{headerTitle}</span>\r\n          {goal && (\r\n            <Badge variant=\"secondary\" className=\"bg-blue-50 text-blue-700 border-blue-200\">\r\n              {goal}\r\n            </Badge>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Steps */}\r\n      <div className=\"space-y-6\">\r\n        {steps.map((step, i) => {\r\n          const n = i + 1;\r\n          const stepPillText = (tr('step') as (n: number) => string)(n);\r\n          const toolsOpened = openTools.has(i);\r\n          const promptOpened = openPrompts.has(i);\r\n\r\n          const promptText =\r\n            (buildPrompt && buildPrompt({ goal, stepTitle: step.title, tools: step.tools, language: lang })) ||\r\n            defaultPromptBuilder({ goal, stepTitle: step.title, tools: step.tools, language: lang });\r\n\r\n          return (\r\n            <div\r\n              key={`${step.title}-${i}`}\r\n              className={`rounded-2xl border bg-white shadow-sm ${\r\n                toolsOpened || promptOpened ? 'border-blue-200' : 'border-slate-200'\r\n              }`}\r\n            >\r\n              {/* Header */}\r\n              <div className=\"flex items-start gap-3 px-4 sm:px-5 pt-4\">\r\n                {/* Left step badge */}\r\n                <div\r\n                  className={`w-9 h-9 sm:w-10 sm:h-10 rounded-2xl flex items-center justify-center text-white font-bold shadow-md\r\n                    ${i % 3 === 0 ? 'bg-gradient-to-br from-blue-500 to-indigo-600 shadow-blue-500/25' :\r\n                      i % 3 === 1 ? 'bg-gradient-to-br from-purple-500 to-pink-600 shadow-purple-500/25' :\r\n                                    'bg-gradient-to-br from-emerald-500 to-green-600 shadow-emerald-500/25'}`}\r\n                >\r\n                  {n}\r\n                </div>\r\n\r\n                {/* Title & subtitle */}\r\n                <div className=\"flex-1 min-w-0 pb-4\">\r\n                  <div className=\"text-slate-800 font-semibold truncate\">{step.title}</div>\r\n                  <div className=\"text-xs text-slate-500\">\r\n                    {(tr('recommendedToolsCount') as (n: number) => string)(step.tools.length)}\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Right controls */}\r\n                <div className=\"flex items-center gap-2 pb-4\">\r\n                  {/* AI assistant bubble button */}\r\n                  <button\r\n                    onClick={() => setOpenPrompts((s) => toggle(s, i))}\r\n                    className={`inline-flex items-center gap-2 px-3 h-9 rounded-xl text-white shadow-sm transition relative\r\n                      ${promptOpened ? 'bg-orange-500' : 'bg-gradient-to-r from-amber-400 to-orange-500 hover:from-amber-500 hover:to-orange-600'}\r\n                    `}\r\n                    title={tr('assistantSuggestion')}\r\n                  >\r\n                    <Lightbulb className=\"w-4 h-4\" />\r\n                    <span className=\"text-sm font-medium hidden sm:inline\">{tr('assistantSuggestion')}</span>\r\n                  </button>\r\n\r\n                  {/* \"Step X\" pill that toggles tools */}\r\n                  <button\r\n                    onClick={() => setOpenTools((s) => toggle(s, i))}\r\n                    className=\"inline-flex items-center gap-2 px-3 h-9 rounded-xl bg-slate-100 text-slate-700 hover:bg-slate-200 border border-slate-200\"\r\n                    title={stepPillText}\r\n                  >\r\n                    <span className=\"text-sm font-medium\">{stepPillText}</span>\r\n                    {toolsOpened ? <ChevronUp className=\"w-4 h-4\" /> : <ChevronDown className=\"w-4 h-4\" />}\r\n                  </button>\r\n                </div>\r\n              </div>\r\n\r\n              {/* PROMPT panel (opened by orange button) */}\r\n              {promptOpened && (\r\n                <div className=\"px-4 sm:px-5 pb-4\">\r\n                  <div className=\"bg-gradient-to-r from-amber-50 to-orange-50 border border-amber-200/60 rounded-xl p-4\">\r\n                    <div className=\"flex items-start gap-3\">\r\n                      <div className=\"w-9 h-9 rounded-lg bg-gradient-to-br from-amber-400 to-orange-500 text-white flex items-center justify-center flex-shrink-0\">\r\n                        <Lightbulb className=\"w-4 h-4\" />\r\n                      </div>\r\n                      <div className=\"flex-1\">\r\n                        <div className=\"flex items-center gap-2 mb-2\">\r\n                          <span className=\"font-semibold text-amber-800\">{tr('assistantSuggestion')}</span>\r\n                          <Badge\r\n                            variant=\"secondary\"\r\n                            className=\"text-xs bg-amber-100 text-amber-700 border-amber-200\"\r\n                          >\r\n                            {tr('copyPasteReady')}\r\n                          </Badge>\r\n                        </div>\r\n\r\n                        <div className=\"bg-white/80 border border-amber-200 rounded-lg p-3 text-sm text-slate-700\">\r\n                          {promptText}\r\n                        </div>\r\n\r\n                        <div className=\"mt-2 flex items-center justify-between\">\r\n                          <span className=\"text-xs text-amber-700\">{tr('promptHint')}</span>\r\n                          <Button\r\n                            variant=\"outline\"\r\n                            onClick={() => copyPrompt(promptText, i)}\r\n                            className={`h-8 px-3 rounded-lg border-amber-200 ${\r\n                              copiedIdx === i\r\n                                ? 'bg-green-50 border-green-200 text-green-700'\r\n                                : 'text-amber-700 hover:bg-amber-50'\r\n                            }`}\r\n                          >\r\n                            {copiedIdx === i ? <Check className=\"w-4 h-4 mr-1\" /> : <Copy className=\"w-4 h-4 mr-1\" />}\r\n                            <span className=\"text-xs font-medium\">\r\n                              {copiedIdx === i ? tr('copied') : tr('copy')}\r\n                            </span>\r\n                          </Button>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              {/* TOOLS panel (opened by Step pill) */}\r\n              {toolsOpened && (\r\n                <div className=\"px-4 sm:px-5 pb-5\">\r\n                  <div className=\"grid sm:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n                    {step.tools.map((tool) => (\r\n                      <button\r\n                        key={`${step.title}-${tool.name}`}\r\n                        onClick={() => tool.link && onOpenTool(tool)}\r\n                        className={`flex items-center gap-3 rounded-xl border p-3 text-left transition ${\r\n                          tool.link\r\n                            ? 'bg-white border-slate-200 hover:shadow-md hover:-translate-y-[2px]'\r\n                            : 'bg-slate-50 border-slate-200 opacity-70 cursor-default'\r\n                        }`}\r\n                      >\r\n                        <div className=\"w-10 h-10 rounded-xl bg-gradient-to-br from-blue-400 to-indigo-500 flex items-center justify-center overflow-hidden\">\r\n                          {tool.icon ? (\r\n                            <img\r\n                              src={tool.icon}\r\n                              alt={tool.name}\r\n                              className=\"w-6 h-6 object-contain\"\r\n                              referrerPolicy=\"no-referrer\"\r\n                            />\r\n                          ) : (\r\n                            <span className=\"text-white text-sm font-semibold\">{tool.name.slice(0, 1)}</span>\r\n                          )}\r\n                        </div>\r\n                        <div className=\"flex-1 min-w-0\">\r\n                          <div className=\"font-medium text-slate-800 truncate\">{tool.name}</div>\r\n                          <div className=\"text-xs text-slate-500 truncate\">\r\n                            {tool.link ? L.available : L.noLink}\r\n                          </div>\r\n                        </div>\r\n                        <Badge variant=\"secondary\" className=\"text-[10px] bg-blue-50 text-blue-700 border-blue-200\">\r\n                          {L.aiTool}\r\n                        </Badge>\r\n                      </button>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}