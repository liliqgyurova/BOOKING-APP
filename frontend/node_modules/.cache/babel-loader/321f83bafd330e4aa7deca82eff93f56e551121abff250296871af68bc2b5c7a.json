{"ast":null,"code":"import React,{useMemo,useState}from'react';import{ChevronDown,ChevronUp,Lightbulb,Copy,Check}from'lucide-react';import{Badge}from'./badge';import{Button}from'./button';/* ---------- Types ---------- */import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";/* ---------- Local i18n (fallbacks) ---------- */const STR={en:{assistantSuggestion:'AI Assistant Suggestion',copyPasteReady:'Copy & Paste Ready',copy:'Copy',copied:'Copied!',promptHint:'💡 Copy this prompt and paste it into any AI assistant (ChatGPT, Claude, etc.) for personalized guidance on this step.',aiTool:'AI Tool',available:'Available',noLink:'No link',myGoalFallback:'My goal'},bg:{assistantSuggestion:'Предложение от AI асистент',copyPasteReady:'Готово за копиране',copy:'Копирай',copied:'Копирано!',promptHint:'💡 Копирай промпта и го постави в AI асистент (ChatGPT, Claude и др.) за персонализирано ръководство за тази стъпка.',aiTool:'AI инструмент',available:'Налично',noLink:'Няма линк',myGoalFallback:'Моята цел'}};/* ---------- Helpers ---------- */function detectLanguage(text){if(!text)return'en';return /[а-яё]/i.test(text)?'bg':'en';}function defaultPromptBuilder(_ref){let{goal,stepTitle,tools,language}=_ref;const bg=language==='bg';const goalPart=goal?bg?`Моята главна цел е: \"${goal}\". `:`My main goal is: \"${goal}\". `:'';const ctx=tools.length>0?bg?`Тази стъпка включва ${tools.length} препоръчани инструмента/подхода. `:`This step involves ${tools.length} recommended tools/approaches. `:'';return(bg?'Ти си експертен асистент, който ми помага да постигам целите си. ':'You are an expert assistant helping me achieve my goals. ')+goalPart+(bg?`Нуждая се от помощ със стъпката: \"${stepTitle}\". `:`I need help with the step: \"${stepTitle}\". `)+ctx+(bg?'Моля, дай: 1) ясен план стъпка по стъпка, 2) най-добри практики, 3) чести грешки и как да ги избегна, 4) нужни входове и очаквани изходи, 5) критерии за качество. Накрая задай 2–3 уточняващи въпроса за контекст и изисквания.':'Please provide: 1) a clear step-by-step action plan, 2) best practices, 3) common pitfalls and how to avoid them, 4) required inputs and expected outputs, 5) quality criteria. Then ask 2–3 clarifying questions about my context and requirements.');}export default function PlanMindMap(_ref2){let{goal,steps,onOpenTool,t,language,buildPrompt}=_ref2;const lang=language||detectLanguage(goal||steps.map(s=>s.title).join(' '));const L=STR[lang];// plain-string translator with safe fallback\nconst s=key=>{const defVal=L[key];if(t){try{const v=t(key);if(typeof v==='string'&&v)return v;}catch{/* ignore */}}return defVal;};// dynamic labels (never call t for these)\nconst stepLabel=n=>lang==='bg'?`Стъпка ${n}`:`Step ${n}`;const recCountLabel=n=>lang==='bg'?`${n} препоръчани инструмента`:`${n} recommended tools`;// state\nconst[openTools,setOpenTools]=useState(new Set([0]));const[openPrompts,setOpenPrompts]=useState(new Set());const[copiedIdx,setCopiedIdx]=useState(null);const headerTitle=useMemo(()=>goal||s('myGoalFallback'),[goal,lang]);const toggle=(set,idx)=>{const next=new Set(set);next.has(idx)?next.delete(idx):next.add(idx);return next;};const copyPrompt=async(text,i)=>{try{await navigator.clipboard.writeText(text);setCopiedIdx(i);setTimeout(()=>setCopiedIdx(null),1600);}catch{alert(s('promptHint'));}};return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"inline-flex items-center gap-3 bg-white/80 border border-slate-200 rounded-2xl px-4 py-3 shadow-sm\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-slate-700\",children:headerTitle}),goal&&/*#__PURE__*/_jsx(Badge,{variant:\"secondary\",className:\"bg-blue-50 text-blue-700 border-blue-200\",children:goal})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-6\",children:steps.map((step,i)=>{const n=i+1;const toolsOpened=openTools.has(i);const promptOpened=openPrompts.has(i);const promptText=buildPrompt&&buildPrompt({goal,stepTitle:step.title,tools:step.tools,language:lang})||defaultPromptBuilder({goal,stepTitle:step.title,tools:step.tools,language:lang});return/*#__PURE__*/_jsxs(\"div\",{className:`rounded-2xl border bg-white shadow-sm ${toolsOpened||promptOpened?'border-blue-200':'border-slate-200'}`,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start gap-3 px-4 sm:px-5 pt-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:`w-9 h-9 sm:w-10 sm:h-10 rounded-2xl flex items-center justify-center text-white font-bold shadow-md\n                    ${i%3===0?'bg-gradient-to-br from-blue-500 to-indigo-600 shadow-blue-500/25':i%3===1?'bg-gradient-to-br from-purple-500 to-pink-600 shadow-purple-500/25':'bg-gradient-to-br from-emerald-500 to-green-600 shadow-emerald-500/25'}`,children:n}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 min-w-0 pb-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-slate-800 font-semibold truncate\",children:step.title}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-slate-500\",children:recCountLabel(step.tools.length)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 pb-4\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setOpenPrompts(sset=>toggle(sset,i)),className:`inline-flex items-center gap-2 px-3 h-9 rounded-xl text-white shadow-sm transition relative\n                      ${promptOpened?'bg-orange-500':'bg-gradient-to-r from-amber-400 to-orange-500 hover:from-amber-500 hover:to-orange-600'}\n                    `,title:s('assistantSuggestion'),children:[/*#__PURE__*/_jsx(Lightbulb,{className:\"w-4 h-4\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium hidden sm:inline\",children:s('assistantSuggestion')})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setOpenTools(sset=>toggle(sset,i)),className:\"inline-flex items-center gap-2 px-3 h-9 rounded-xl bg-slate-100 text-slate-700 hover:bg-slate-200 border border-slate-200\",title:stepLabel(n),children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium\",children:stepLabel(n)}),toolsOpened?/*#__PURE__*/_jsx(ChevronUp,{className:\"w-4 h-4\"}):/*#__PURE__*/_jsx(ChevronDown,{className:\"w-4 h-4\"})]})]})]}),promptOpened&&/*#__PURE__*/_jsx(\"div\",{className:\"px-4 sm:px-5 pb-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-gradient-to-r from-amber-50 to-orange-50 border border-amber-200/60 rounded-xl p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start gap-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-9 h-9 rounded-lg bg-gradient-to-br from-amber-400 to-orange-500 text-white flex items-center justify-center flex-shrink-0\",children:/*#__PURE__*/_jsx(Lightbulb,{className:\"w-4 h-4\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 mb-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold text-amber-800\",children:s('assistantSuggestion')}),/*#__PURE__*/_jsx(Badge,{variant:\"secondary\",className:\"text-xs bg-amber-100 text-amber-700 border-amber-200\",children:s('copyPasteReady')})]}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white/80 border border-amber-200 rounded-lg p-3 text-sm text-slate-700\",children:promptText}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-2 flex items-center justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-amber-700\",children:s('promptHint')}),/*#__PURE__*/_jsxs(Button,{variant:\"outline\",onClick:()=>copyPrompt(promptText,i),className:`h-8 px-3 rounded-lg border-amber-200 ${copiedIdx===i?'bg-green-50 border-green-200 text-green-700':'text-amber-700 hover:bg-amber-50'}`,children:[copiedIdx===i?/*#__PURE__*/_jsx(Check,{className:\"w-4 h-4 mr-1\"}):/*#__PURE__*/_jsx(Copy,{className:\"w-4 h-4 mr-1\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs font-medium\",children:copiedIdx===i?s('copied'):s('copy')})]})]})]})]})})}),toolsOpened&&/*#__PURE__*/_jsx(\"div\",{className:\"px-4 sm:px-5 pb-5\",children:/*#__PURE__*/_jsx(\"div\",{className:\"grid sm:grid-cols-2 lg:grid-cols-3 gap-4\",children:step.tools.map(tool=>/*#__PURE__*/_jsxs(\"button\",{onClick:()=>tool.link&&onOpenTool(tool),className:`flex items-center gap-3 rounded-xl border p-3 text-left transition ${tool.link?'bg-white border-slate-200 hover:shadow-md hover:-translate-y-[2px]':'bg-slate-50 border-slate-200 opacity-70 cursor-default'}`,children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 rounded-xl bg-gradient-to-br from-blue-400 to-indigo-500 flex items-center justify-center overflow-hidden\",children:tool.icon?/*#__PURE__*/_jsx(\"img\",{src:tool.icon,alt:tool.name,className:\"w-6 h-6 object-contain\",referrerPolicy:\"no-referrer\"}):/*#__PURE__*/_jsx(\"span\",{className:\"text-white text-sm font-semibold\",children:tool.name.slice(0,1)})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 min-w-0\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-medium text-slate-800 truncate\",children:tool.name}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-slate-500 truncate\",children:tool.link?s('available'):s('noLink')})]}),/*#__PURE__*/_jsx(Badge,{variant:\"secondary\",className:\"text-[10px] bg-blue-50 text-blue-700 border-blue-200\",children:s('aiTool')})]},`${step.title}-${tool.name}`))})})]},`${step.title}-${i}`);})})]});}","map":{"version":3,"names":["React","useMemo","useState","ChevronDown","ChevronUp","Lightbulb","Copy","Check","Badge","Button","jsx","_jsx","jsxs","_jsxs","STR","en","assistantSuggestion","copyPasteReady","copy","copied","promptHint","aiTool","available","noLink","myGoalFallback","bg","detectLanguage","text","test","defaultPromptBuilder","_ref","goal","stepTitle","tools","language","goalPart","ctx","length","PlanMindMap","_ref2","steps","onOpenTool","t","buildPrompt","lang","map","s","title","join","L","key","defVal","v","stepLabel","n","recCountLabel","openTools","setOpenTools","Set","openPrompts","setOpenPrompts","copiedIdx","setCopiedIdx","headerTitle","toggle","set","idx","next","has","delete","add","copyPrompt","i","navigator","clipboard","writeText","setTimeout","alert","className","children","variant","step","toolsOpened","promptOpened","promptText","onClick","sset","tool","link","icon","src","alt","name","referrerPolicy","slice"],"sources":["C:/Users/komun/booking-app/frontend/src/components/ui/PlanMindMap.tsx"],"sourcesContent":["import React, { useMemo, useState } from 'react';\r\nimport { ChevronDown, ChevronUp, Lightbulb, Copy, Check } from 'lucide-react';\r\nimport { Badge } from './badge';\r\nimport { Button } from './button';\r\n\r\n/* ---------- Types ---------- */\r\ntype Tool = { name: string; link?: string | null; icon?: string | null };\r\ntype Group = { title: string; tools: Tool[] };\r\ntype Language = 'en' | 'bg';\r\n\r\ntype PlanMindMapProps = {\r\n  goal: string;\r\n  steps: Group[];\r\n  onOpenTool: (tool: Tool) => void;\r\n\r\n  /** optional i18n bridge from App; used only for plain strings */\r\n  t?: (key: string) => string;\r\n  language?: Language;\r\n\r\n  /** optional external prompt builder */\r\n  buildPrompt?: (args: {\r\n    goal: string;\r\n    stepTitle: string;\r\n    tools: Tool[];\r\n    language: Language;\r\n  }) => string;\r\n};\r\n\r\n/* ---------- Local i18n (fallbacks) ---------- */\r\nconst STR = {\r\n  en: {\r\n    assistantSuggestion: 'AI Assistant Suggestion',\r\n    copyPasteReady: 'Copy & Paste Ready',\r\n    copy: 'Copy',\r\n    copied: 'Copied!',\r\n    promptHint:\r\n      '💡 Copy this prompt and paste it into any AI assistant (ChatGPT, Claude, etc.) for personalized guidance on this step.',\r\n    aiTool: 'AI Tool',\r\n    available: 'Available',\r\n    noLink: 'No link',\r\n    myGoalFallback: 'My goal',\r\n  },\r\n  bg: {\r\n    assistantSuggestion: 'Предложение от AI асистент',\r\n    copyPasteReady: 'Готово за копиране',\r\n    copy: 'Копирай',\r\n    copied: 'Копирано!',\r\n    promptHint:\r\n      '💡 Копирай промпта и го постави в AI асистент (ChatGPT, Claude и др.) за персонализирано ръководство за тази стъпка.',\r\n    aiTool: 'AI инструмент',\r\n    available: 'Налично',\r\n    noLink: 'Няма линк',\r\n    myGoalFallback: 'Моята цел',\r\n  },\r\n};\r\n\r\n/* ---------- Helpers ---------- */\r\nfunction detectLanguage(text: string): Language {\r\n  if (!text) return 'en';\r\n  return /[а-яё]/i.test(text) ? 'bg' : 'en';\r\n}\r\n\r\nfunction defaultPromptBuilder({\r\n  goal,\r\n  stepTitle,\r\n  tools,\r\n  language,\r\n}: {\r\n  goal: string;\r\n  stepTitle: string;\r\n  tools: Tool[];\r\n  language: Language;\r\n}) {\r\n  const bg = language === 'bg';\r\n  const goalPart = goal ? (bg ? `Моята главна цел е: \"${goal}\". ` : `My main goal is: \"${goal}\". `) : '';\r\n  const ctx =\r\n    tools.length > 0\r\n      ? bg\r\n        ? `Тази стъпка включва ${tools.length} препоръчани инструмента/подхода. `\r\n        : `This step involves ${tools.length} recommended tools/approaches. `\r\n      : '';\r\n\r\n  return (\r\n    (bg\r\n      ? 'Ти си експертен асистент, който ми помага да постигам целите си. '\r\n      : 'You are an expert assistant helping me achieve my goals. ') +\r\n    goalPart +\r\n    (bg ? `Нуждая се от помощ със стъпката: \"${stepTitle}\". ` : `I need help with the step: \"${stepTitle}\". `) +\r\n    ctx +\r\n    (bg\r\n      ? 'Моля, дай: 1) ясен план стъпка по стъпка, 2) най-добри практики, 3) чести грешки и как да ги избегна, 4) нужни входове и очаквани изходи, 5) критерии за качество. Накрая задай 2–3 уточняващи въпроса за контекст и изисквания.'\r\n      : 'Please provide: 1) a clear step-by-step action plan, 2) best practices, 3) common pitfalls and how to avoid them, 4) required inputs and expected outputs, 5) quality criteria. Then ask 2–3 clarifying questions about my context and requirements.')\r\n  );\r\n}\r\n\r\nexport default function PlanMindMap({\r\n  goal,\r\n  steps,\r\n  onOpenTool,\r\n  t,\r\n  language,\r\n  buildPrompt,\r\n}: PlanMindMapProps) {\r\n  const lang: Language = language || detectLanguage(goal || steps.map((s) => s.title).join(' '));\r\n  const L = STR[lang];\r\n\r\n  // plain-string translator with safe fallback\r\n  const s = (key: keyof typeof L): string => {\r\n    const defVal = L[key];\r\n    if (t) {\r\n      try {\r\n        const v = t(key as any);\r\n        if (typeof v === 'string' && v) return v;\r\n      } catch {\r\n        /* ignore */\r\n      }\r\n    }\r\n    return defVal;\r\n  };\r\n\r\n  // dynamic labels (never call t for these)\r\n  const stepLabel = (n: number) => (lang === 'bg' ? `Стъпка ${n}` : `Step ${n}`);\r\n  const recCountLabel = (n: number) =>\r\n    lang === 'bg' ? `${n} препоръчани инструмента` : `${n} recommended tools`;\r\n\r\n  // state\r\n  const [openTools, setOpenTools] = useState<Set<number>>(new Set([0]));\r\n  const [openPrompts, setOpenPrompts] = useState<Set<number>>(new Set());\r\n  const [copiedIdx, setCopiedIdx] = useState<number | null>(null);\r\n\r\n  const headerTitle = useMemo(() => goal || s('myGoalFallback'), [goal, lang]);\r\n\r\n  const toggle = (set: Set<number>, idx: number) => {\r\n    const next = new Set(set);\r\n    next.has(idx) ? next.delete(idx) : next.add(idx);\r\n    return next;\r\n  };\r\n\r\n  const copyPrompt = async (text: string, i: number) => {\r\n    try {\r\n      await navigator.clipboard.writeText(text);\r\n      setCopiedIdx(i);\r\n      setTimeout(() => setCopiedIdx(null), 1600);\r\n    } catch {\r\n      alert(s('promptHint'));\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Goal header */}\r\n      <div className=\"text-center\">\r\n        <div className=\"inline-flex items-center gap-3 bg-white/80 border border-slate-200 rounded-2xl px-4 py-3 shadow-sm\">\r\n          <span className=\"text-slate-700\">{headerTitle}</span>\r\n          {goal && (\r\n            <Badge variant=\"secondary\" className=\"bg-blue-50 text-blue-700 border-blue-200\">\r\n              {goal}\r\n            </Badge>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Steps */}\r\n      <div className=\"space-y-6\">\r\n        {steps.map((step, i) => {\r\n          const n = i + 1;\r\n          const toolsOpened = openTools.has(i);\r\n          const promptOpened = openPrompts.has(i);\r\n\r\n          const promptText =\r\n            (buildPrompt &&\r\n              buildPrompt({ goal, stepTitle: step.title, tools: step.tools, language: lang })) ||\r\n            defaultPromptBuilder({ goal, stepTitle: step.title, tools: step.tools, language: lang });\r\n\r\n          return (\r\n            <div\r\n              key={`${step.title}-${i}`}\r\n              className={`rounded-2xl border bg-white shadow-sm ${\r\n                toolsOpened || promptOpened ? 'border-blue-200' : 'border-slate-200'\r\n              }`}\r\n            >\r\n              {/* Header */}\r\n              <div className=\"flex items-start gap-3 px-4 sm:px-5 pt-4\">\r\n                {/* Left step badge */}\r\n                <div\r\n                  className={`w-9 h-9 sm:w-10 sm:h-10 rounded-2xl flex items-center justify-center text-white font-bold shadow-md\r\n                    ${\r\n                      i % 3 === 0\r\n                        ? 'bg-gradient-to-br from-blue-500 to-indigo-600 shadow-blue-500/25'\r\n                        : i % 3 === 1\r\n                        ? 'bg-gradient-to-br from-purple-500 to-pink-600 shadow-purple-500/25'\r\n                        : 'bg-gradient-to-br from-emerald-500 to-green-600 shadow-emerald-500/25'\r\n                    }`}\r\n                >\r\n                  {n}\r\n                </div>\r\n\r\n                {/* Title & subtitle */}\r\n                <div className=\"flex-1 min-w-0 pb-4\">\r\n                  <div className=\"text-slate-800 font-semibold truncate\">{step.title}</div>\r\n                  <div className=\"text-xs text-slate-500\">{recCountLabel(step.tools.length)}</div>\r\n                </div>\r\n\r\n                {/* Right controls */}\r\n                <div className=\"flex items-center gap-2 pb-4\">\r\n                  {/* AI assistant button */}\r\n                  <button\r\n                    onClick={() => setOpenPrompts((sset) => toggle(sset, i))}\r\n                    className={`inline-flex items-center gap-2 px-3 h-9 rounded-xl text-white shadow-sm transition relative\r\n                      ${\r\n                        promptOpened\r\n                          ? 'bg-orange-500'\r\n                          : 'bg-gradient-to-r from-amber-400 to-orange-500 hover:from-amber-500 hover:to-orange-600'\r\n                      }\r\n                    `}\r\n                    title={s('assistantSuggestion')}\r\n                  >\r\n                    <Lightbulb className=\"w-4 h-4\" />\r\n                    <span className=\"text-sm font-medium hidden sm:inline\">{s('assistantSuggestion')}</span>\r\n                  </button>\r\n\r\n                  {/* \"Step X\" pill */}\r\n                  <button\r\n                    onClick={() => setOpenTools((sset) => toggle(sset, i))}\r\n                    className=\"inline-flex items-center gap-2 px-3 h-9 rounded-xl bg-slate-100 text-slate-700 hover:bg-slate-200 border border-slate-200\"\r\n                    title={stepLabel(n)}\r\n                  >\r\n                    <span className=\"text-sm font-medium\">{stepLabel(n)}</span>\r\n                    {toolsOpened ? <ChevronUp className=\"w-4 h-4\" /> : <ChevronDown className=\"w-4 h-4\" />}\r\n                  </button>\r\n                </div>\r\n              </div>\r\n\r\n              {/* PROMPT panel */}\r\n              {promptOpened && (\r\n                <div className=\"px-4 sm:px-5 pb-4\">\r\n                  <div className=\"bg-gradient-to-r from-amber-50 to-orange-50 border border-amber-200/60 rounded-xl p-4\">\r\n                    <div className=\"flex items-start gap-3\">\r\n                      <div className=\"w-9 h-9 rounded-lg bg-gradient-to-br from-amber-400 to-orange-500 text-white flex items-center justify-center flex-shrink-0\">\r\n                        <Lightbulb className=\"w-4 h-4\" />\r\n                      </div>\r\n                      <div className=\"flex-1\">\r\n                        <div className=\"flex items-center gap-2 mb-2\">\r\n                          <span className=\"font-semibold text-amber-800\">{s('assistantSuggestion')}</span>\r\n                          <Badge\r\n                            variant=\"secondary\"\r\n                            className=\"text-xs bg-amber-100 text-amber-700 border-amber-200\"\r\n                          >\r\n                            {s('copyPasteReady')}\r\n                          </Badge>\r\n                        </div>\r\n\r\n                        <div className=\"bg-white/80 border border-amber-200 rounded-lg p-3 text-sm text-slate-700\">\r\n                          {promptText}\r\n                        </div>\r\n\r\n                        <div className=\"mt-2 flex items-center justify-between\">\r\n                          <span className=\"text-xs text-amber-700\">{s('promptHint')}</span>\r\n                          <Button\r\n                            variant=\"outline\"\r\n                            onClick={() => copyPrompt(promptText, i)}\r\n                            className={`h-8 px-3 rounded-lg border-amber-200 ${\r\n                              copiedIdx === i\r\n                                ? 'bg-green-50 border-green-200 text-green-700'\r\n                                : 'text-amber-700 hover:bg-amber-50'\r\n                            }`}\r\n                          >\r\n                            {copiedIdx === i ? <Check className=\"w-4 h-4 mr-1\" /> : <Copy className=\"w-4 h-4 mr-1\" />}\r\n                            <span className=\"text-xs font-medium\">\r\n                              {copiedIdx === i ? s('copied') : s('copy')}\r\n                            </span>\r\n                          </Button>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              {/* TOOLS panel */}\r\n              {toolsOpened && (\r\n                <div className=\"px-4 sm:px-5 pb-5\">\r\n                  <div className=\"grid sm:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n                    {step.tools.map((tool) => (\r\n                      <button\r\n                        key={`${step.title}-${tool.name}`}\r\n                        onClick={() => tool.link && onOpenTool(tool)}\r\n                        className={`flex items-center gap-3 rounded-xl border p-3 text-left transition ${\r\n                          tool.link\r\n                            ? 'bg-white border-slate-200 hover:shadow-md hover:-translate-y-[2px]'\r\n                            : 'bg-slate-50 border-slate-200 opacity-70 cursor-default'\r\n                        }`}\r\n                      >\r\n                        <div className=\"w-10 h-10 rounded-xl bg-gradient-to-br from-blue-400 to-indigo-500 flex items-center justify-center overflow-hidden\">\r\n                          {tool.icon ? (\r\n                            <img\r\n                              src={tool.icon}\r\n                              alt={tool.name}\r\n                              className=\"w-6 h-6 object-contain\"\r\n                              referrerPolicy=\"no-referrer\"\r\n                            />\r\n                          ) : (\r\n                            <span className=\"text-white text-sm font-semibold\">{tool.name.slice(0, 1)}</span>\r\n                          )}\r\n                        </div>\r\n                        <div className=\"flex-1 min-w-0\">\r\n                          <div className=\"font-medium text-slate-800 truncate\">{tool.name}</div>\r\n                          <div className=\"text-xs text-slate-500 truncate\">\r\n                            {tool.link ? s('available') : s('noLink')}\r\n                          </div>\r\n                        </div>\r\n                        <Badge variant=\"secondary\" className=\"text-[10px] bg-blue-50 text-blue-700 border-blue-200\">\r\n                          {s('aiTool')}\r\n                        </Badge>\r\n                      </button>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}