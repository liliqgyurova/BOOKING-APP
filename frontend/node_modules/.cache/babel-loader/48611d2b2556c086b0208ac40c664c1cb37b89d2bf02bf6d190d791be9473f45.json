{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\komun\\\\booking-app\\\\frontend\\\\src\\\\App.tsx\",\n  _env,\n  _s2 = $RefreshSig$();\nimport React, { useEffect, useRef, useState, useCallback } from 'react';\nimport { Search, Star, MessageCircle, Zap, Sparkles, History, X, ArrowLeft, Grid3x3, Heart, User, Menu, Wand2 } from 'lucide-react';\nimport { Button } from './components/ui/button';\nimport { Input } from './components/ui/input';\nimport { Badge } from './components/ui/badge';\nimport { Card, CardContent } from './components/ui/card';\nimport { openOAuthPopup, fetchMe, refreshSession, logout } from './auth';\nimport PlanMindMap from './components/ui/PlanMindMap';\nimport { useLanguage, useTranslations } from './LanguageContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n/* ---------- API base ---------- */\nconst API_BASE = ((_env = import.meta.env) === null || _env === void 0 ? void 0 : _env.VITE_API_BASE) || window.__API_BASE__ || 'http://127.0.0.1:8000';\n\n/* ---------- Types matching backend ---------- */\n\n/* ---------- Language and Localization ---------- */\n// type Language = 'en' | 'bg';\n\n// Language detection function\nfunction detectLanguage(text) {\n  if (!text || text.trim().length < 3) return 'en';\n\n  // Bulgarian characters detection\n  const bulgarianChars = /[а-я]/gi;\n  const bulgarianMatches = text.match(bulgarianChars);\n  const bulgarianRatio = bulgarianMatches ? bulgarianMatches.length / text.length : 0;\n\n  // If more than 20% of characters are Cyrillic, consider it Bulgarian\n  return bulgarianRatio > 0.2 ? 'bg' : 'en';\n}\n\n/* ---------- Favorites v2 (persist full tool) ---------- */\n\nconst FAVS_V2_KEY = 'myai:favs_v2';\nconst FAVS_V1_KEY = 'myai:favs';\n\n/* ---------- Recent prompts ---------- */\nconst RECENT_KEY = 'myai:recent_prompts';\nconst RECENT_MAX = 6;\n\n/* ---------- Language preference ---------- */\nconst LANGUAGE_KEY = 'myai:language';\n\n/* ---------- Helpers ---------- */\nfunction groupsFromPlanFallback(plan) {\n  const byTitle = new Map();\n  for (const p of plan) {\n    var _byTitle$get;\n    const title = p.task;\n    const bucket = (_byTitle$get = byTitle.get(title)) !== null && _byTitle$get !== void 0 ? _byTitle$get : new Map();\n    for (const t of p.tools) bucket.set(t.name, t);\n    byTitle.set(title, bucket);\n  }\n  return Array.from(byTitle.entries()).map(([title, bucket]) => ({\n    title,\n    tools: Array.from(bucket.values())\n  }));\n}\n\n// Enhanced suggested prompt builder with language support\n// Enhanced suggested prompt builder with language support and step-specific context\n// Direct actionable prompt builder that creates copy-paste ready prompts\nfunction buildStepPrompt(goal, stepTitle, tools, language) {\n  const isBg = language === 'bg';\n\n  // Normalize goal and step for analysis\n  const stepLower = stepTitle.toLowerCase();\n  const goalLower = goal.toLowerCase();\n\n  // Create placeholder for user's specific context\n  const goalPlaceholder = goal || (isBg ? '[вашата цел/продукт/услуга]' : '[your goal/product/service]');\n\n  // Generate specific, actionable prompts based on step content\n  let actionablePrompt = '';\n\n  // Research steps\n  if (stepLower.includes('изследв') || stepLower.includes('проуч') || stepLower.includes('research') || stepLower.includes('анализ') || stepLower.includes('analyze') || stepLower.includes('аудитория')) {\n    if (stepLower.includes('аудитория') || stepLower.includes('audience') || stepLower.includes('конкурент') || stepLower.includes('competitor')) {\n      actionablePrompt = isBg ? `Направи подробно проучване на целевата аудитория за ${goalPlaceholder}, като включиш демографски данни, психографски характеристики, поведенчески модели и основни болки/желания. След това анализирай конкурентите (местни и международни), опиши техните силни и слаби страни, ценова политика, канали за комуникация и уникално предложение. Завърши с препоръки как моят бизнес може да се отличи.` : `Conduct detailed research on the target audience for ${goalPlaceholder}, including demographic data, psychographic characteristics, behavioral patterns, and main pain points/desires. Then analyze competitors (local and international), describe their strengths and weaknesses, pricing policy, communication channels, and unique value proposition. End with recommendations on how my business can differentiate itself.`;\n    } else if (stepLower.includes('пазар') || stepLower.includes('market') || stepLower.includes('тенден') || stepLower.includes('trend')) {\n      actionablePrompt = isBg ? `Анализирай пазарните тенденции и възможности за ${goalPlaceholder}. Проучи размера на пазара, темповете на растеж, ключовите играчи, регулаторните изисквания и технологичните промени. Идентифицирай нишови сегменти, неудовлетворени нужди и бъдещи възможности. Предостави конкретни данни, статистики и източници, и завърши с препоръки за пазарно позициониране.` : `Analyze market trends and opportunities for ${goalPlaceholder}. Research market size, growth rates, key players, regulatory requirements, and technological changes. Identify niche segments, unmet needs, and future opportunities. Provide specific data, statistics, and sources, and conclude with market positioning recommendations.`;\n    } else {\n      actionablePrompt = isBg ? `Проведи задълбочено изследване за ${goalPlaceholder}. Събери актуална информация от надеждни sources, анализирай най-добрите практики в индустрията, идентифицирай ключовите успешни фактори и потенциалните рискове. Създай структуриран доклад с основни находки, статистики и препоръки за следващи стъпки.` : `Conduct in-depth research on ${goalPlaceholder}. Gather current information from reliable sources, analyze industry best practices, identify key success factors and potential risks. Create a structured report with key findings, statistics, and recommendations for next steps.`;\n    }\n  }\n\n  // Creative/Design steps\n  else if (stepLower.includes('създа') || stepLower.includes('генерир') || stepLower.includes('create') || stepLower.includes('дизайн') || stepLower.includes('design') || stepLower.includes('концепц') || stepLower.includes('concept')) {\n    if (stepLower.includes('лого') || stepLower.includes('logo') || stepLower.includes('бранд') || stepLower.includes('brand')) {\n      actionablePrompt = isBg ? `Създай концепция за лого и визуална идентичност за ${goalPlaceholder}. Опиши 3-5 различни дизайнерски посоки, включително цветова палитра, типография, стил и настроение. За всяка концепция обясни символиката, психологическото въздействие и как отразява стойностите на бранда. Добави препоръки за приложение на различни носители (уеб, печат, социални мрежи) и файлови формати за изпълнение.` : `Create a logo and visual identity concept for ${goalPlaceholder}. Describe 3-5 different design directions, including color palette, typography, style, and mood. For each concept, explain the symbolism, psychological impact, and how it reflects the brand values. Add recommendations for application across different media (web, print, social media) and file formats for execution.`;\n    } else if (stepLower.includes('контент') || stepLower.includes('content') || stepLower.includes('материал') || stepLower.includes('кампан') || stepLower.includes('campaign')) {\n      actionablePrompt = isBg ? `Създай набор от маркетингови материали за ${goalPlaceholder}, включително: слоган, ключови послания, текстове за социални мрежи, имейл кампании и кратко видео-сценарий. Материалите трябва да са съобразени с целевата аудитория, да подчертават уникалното предложение и да предизвикват емоция и ангажираност. Дай ми и предложение за рекламни кампании с конкретни канали (Facebook, Instagram, Google Ads, TikTok и др.), бюджети и очаквани резултати.` : `Create a set of marketing materials for ${goalPlaceholder}, including: slogan, key messages, social media copy, email campaigns, and a short video script. Materials should be tailored to the target audience, highlight the unique value proposition, and evoke emotion and engagement. Also provide advertising campaign suggestions with specific channels (Facebook, Instagram, Google Ads, TikTok, etc.), budgets, and expected results.`;\n    } else {\n      actionablePrompt = isBg ? `Разработи креативна концепция за ${goalPlaceholder}. Създай 3 различни варианта с подробно описание на визуалните елементи, цветова схема, стил и настроение. За всеки вариант обясни целевата аудитория, ключовите съобщения и очакваното въздействие. Включи конкретни препоръки за изпълнение, необходими ресурси и време за реализация.` : `Develop a creative concept for ${goalPlaceholder}. Create 3 different variants with detailed description of visual elements, color scheme, style, and mood. For each variant, explain the target audience, key messages, and expected impact. Include specific implementation recommendations, required resources, and timeline for execution.`;\n    }\n  }\n\n  // Strategy/Planning steps\n  else if (stepLower.includes('план') || stepLower.includes('стратег') || stepLower.includes('plan') || stepLower.includes('strategy') || stepLower.includes('органи') || stepLower.includes('organize')) {\n    actionablePrompt = isBg ? `Създай детайлен стратегически план за ${goalPlaceholder}. Включи: конкретни цели с времеви рамки, необходими ресурси и бюджет, ключови дейности и милестъни, отговорни лица/роли, потенциални рискове и мерки за тяхното минимизиране. Добави KPI метрики за измерване на прогреса и план за редовно ревю и актуализация на стратегията.` : `Create a detailed strategic plan for ${goalPlaceholder}. Include: specific goals with timelines, required resources and budget, key activities and milestones, responsible persons/roles, potential risks and mitigation measures. Add KPI metrics for measuring progress and a plan for regular review and strategy updates.`;\n  }\n\n  // Implementation/Execution steps\n  else if (stepLower.includes('изпълн') || stepLower.includes('реализ') || stepLower.includes('implement') || stepLower.includes('execute') || stepLower.includes('build') || stepLower.includes('develop')) {\n    actionablePrompt = isBg ? `Създай подробен план за изпълнение на ${goalPlaceholder}. Разбий процеса на конкретни задачи със срокове, дефинирай необходимите ресурси и инструменти, създай времева линия с критични моменти. Включи контролни точки за качество, възможни препятствия и алтернативни решения. Добави препоръки за екип, бюджет и методи за проследяване на напредъка.` : `Create a detailed execution plan for ${goalPlaceholder}. Break down the process into specific tasks with deadlines, define required resources and tools, create a timeline with critical moments. Include quality checkpoints, possible obstacles, and alternative solutions. Add recommendations for team, budget, and progress tracking methods.`;\n  }\n\n  // Testing/Validation steps\n  else if (stepLower.includes('тест') || stepLower.includes('провер') || stepLower.includes('test') || stepLower.includes('validate') || stepLower.includes('оценк') || stepLower.includes('evaluate')) {\n    actionablePrompt = isBg ? `Създай план за тестване и валидация на ${goalPlaceholder}. Дефинирай конкретни критерии за успех, методи за тестване (A/B тестове, потребителски интервюта, пилотни програми), необходими инструменти и метрики. Опиши как да събираш и анализираш обратната връзка, как да итерираш базирано на резултатите и какви корекции да правиш преди финалното пускане.` : `Create a testing and validation plan for ${goalPlaceholder}. Define specific success criteria, testing methods (A/B tests, user interviews, pilot programs), required tools and metrics. Describe how to collect and analyze feedback, how to iterate based on results, and what corrections to make before final launch.`;\n  }\n\n  // Launch/Finalization steps\n  else if (stepLower.includes('пуска') || stepLower.includes('лансир') || stepLower.includes('launch') || stepLower.includes('финализир') || stepLower.includes('завърш') || stepLower.includes('complete') || stepLower.includes('публик') || stepLower.includes('publish')) {\n    actionablePrompt = isBg ? `Направи план за лансиране на ${goalPlaceholder}, включително времева линия, стъпки по подготовка, съдържателен календар за социалните мрежи, PR стратегия и възможни партньорства/инфлуенсъри. Опиши как да синхронизирам онлайн и офлайн дейностите, как да изградя очакване преди лансирането и как да постигна максимална видимост в първите 30 дни.` : `Create a launch plan for ${goalPlaceholder}, including timeline, preparation steps, social media content calendar, PR strategy, and potential partnerships/influencers. Describe how to synchronize online and offline activities, how to build anticipation before launch, and how to achieve maximum visibility in the first 30 days.`;\n  }\n\n  // Monitoring/Optimization steps\n  else if (stepLower.includes('мониторинг') || stepLower.includes('следен') || stepLower.includes('monitor') || stepLower.includes('анализ') || stepLower.includes('подобр') || stepLower.includes('optimize') || stepLower.includes('резултат') || stepLower.includes('result')) {\n    actionablePrompt = isBg ? `Предложи система за мониторинг на резултатите от ${goalPlaceholder}. Опиши кои KPI да следя (трафик, конверсии, CAC, ROI, ангажираност, отзиви), какви инструменти да използвам (Google Analytics, Meta Ads Manager, CRM и др.), как да анализирам данните и какви стъпки за оптимизация мога да предприема. Добави и конкретни идеи за A/B тестове, за да подобря ефективността.` : `Suggest a system for monitoring results from ${goalPlaceholder}. Describe which KPIs to track (traffic, conversions, CAC, ROI, engagement, reviews), what tools to use (Google Analytics, Meta Ads Manager, CRM, etc.), how to analyze data, and what optimization steps I can take. Also add specific A/B test ideas to improve effectiveness.`;\n  }\n\n  // Generic fallback\n  else {\n    actionablePrompt = isBg ? `Създай детайлен plan за \"${stepTitle}\" в контекста на ${goalPlaceholder}. Включи конкретни стъпки за изпълнение, необходими ресурси и инструменти, времеви рамки, потенциални предизвикателства и как да ги преодолеем. Добави измерими цели, критерии за успех и план за проследяване на прогреса.` : `Create a detailed plan for \"${stepTitle}\" in the context of ${goalPlaceholder}. Include specific execution steps, required resources and tools, timelines, potential challenges and how to overcome them. Add measurable goals, success criteria, and a progress tracking plan.`;\n  }\n\n  // Add tool-specific guidance if tools are available\n  if (tools.length > 0) {\n    const toolNames = tools.map(t => t.name).join(', ');\n    const toolGuidance = isBg ? `\\n\\nПри работата използвай следните инструменти: ${toolNames}. За всеки инструмент обясни как точно да го използвам за тази задача, какви функции са най-полезни и как да постигна най-добри резултати.` : `\\n\\nUse these tools in your work: ${toolNames}. For each tool, explain exactly how to use it for this task, which features are most useful, and how to achieve the best results.`;\n    actionablePrompt += toolGuidance;\n  }\n  return actionablePrompt;\n}\n\n// read a cookie by name (for XSRF)\nfunction getCookie(name) {\n  const parts = document.cookie ? document.cookie.split('; ') : [];\n  for (const part of parts) {\n    const eq = part.indexOf('=');\n    const key = decodeURIComponent(eq > -1 ? part.slice(0, eq) : part);\n    if (key === name) {\n      const val = eq > -1 ? part.slice(eq + 1) : '';\n      return decodeURIComponent(val);\n    }\n  }\n  return null;\n}\n\n/* ---------- Simple hash router ---------- */\n\nfunction getViewFromHash() {\n  if (window.location.hash === '#/favorites') return 'favorites';\n  if (window.location.hash === '#/categories') return 'categories';\n  return 'home';\n}\nfunction goHome() {\n  if (window.location.hash !== '' && window.location.hash !== '#/') {\n    window.location.hash = '#/';\n  } else {\n    window.scrollTo({\n      top: 0,\n      behavior: 'smooth'\n    });\n  }\n}\nfunction goFavorites() {\n  if (window.location.hash !== '#/favorites') window.location.hash = '#/favorites';\n}\nfunction goCategories() {\n  if (window.location.hash !== '#/categories') window.location.hash = '#/categories';\n}\nexport default function App() {\n  _s2();\n  var _s = $RefreshSig$();\n  const [view, setView] = useState(getViewFromHash());\n  const [activeTab, setActiveTab] = useState('Home');\n  const {\n    language,\n    setLanguage\n  } = useLanguage();\n  const [searchQuery, setSearchQuery] = useState('');\n  const [chatInput, setChatInput] = useState('');\n  const [groups, setGroups] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [currentUser, setCurrentUser] = useState(null);\n\n  // >>> store last goal for visual plan + prompts\n  const [lastGoal, setLastGoal] = useState('');\n\n  // dropdowns\n  const [signinOpen, setSigninOpen] = useState(false);\n  const signinRef = useRef(null);\n  const [profileOpen, setProfileOpen] = useState(false);\n  const profileRef = useRef(null);\n  const [mobileMenuOpen, setMobileMenuOpen] = useState(false);\n\n  // Email modal\n  const [showEmailModal, setShowEmailModal] = useState(false);\n  const [authMode, setAuthMode] = useState('signup');\n  const [authEmail, setAuthEmail] = useState('');\n  const [authPassword, setAuthPassword] = useState('');\n  const [authName, setAuthName] = useState('');\n  const [authSubmitting, setAuthSubmitting] = useState(false);\n  const [authError, setAuthError] = useState(null);\n\n  // Profile modal\n  const [showProfileModal, setShowProfileModal] = useState(false);\n  const [profName, setProfName] = useState('');\n  const [profPic, setProfPic] = useState('');\n  const [profSaving, setProfSaving] = useState(false);\n\n  // Favorites v2 (map by name)\n  const [favs, setFavs] = useState(new Map());\n  const [showFavsOnly, setShowFavsOnly] = useState(false);\n\n  // Recent prompts\n  const [recents, setRecents] = useState([]);\n\n  // Get translation function (memoized to prevent re-renders)\n  const translationsCtx = useTranslations();\n  const t = key => translationsCtx[key];\n\n  // Memoize the onOpenTool callback to prevent re-renders\n  const handleOpenTool = useCallback(tool => {\n    if (tool.link) {\n      window.open(tool.link, '_blank', 'noreferrer,noopener');\n    }\n  }, []);\n\n  // Memoize the buildPrompt callback to prevent re-renders\n  const buildPromptCallback = useCallback(({\n    goal,\n    stepTitle,\n    tools\n  }) => buildStepPrompt(goal, stepTitle, tools, language), [language]);\n\n  // ---- hash router listener ----\n  useEffect(() => {\n    const onHash = () => setView(getViewFromHash());\n    window.addEventListener('hashchange', onHash);\n    return () => window.removeEventListener('hashchange', onHash);\n  }, []);\n\n  // Load saved language preference\n  useEffect(() => {\n    try {\n      const savedLang = localStorage.getItem(LANGUAGE_KEY);\n      if (savedLang && (savedLang === 'en' || savedLang === 'bg')) {\n        setLanguage(savedLang);\n      }\n    } catch {}\n  }, []);\n\n  // Language saver without timeout to prevent race conditions\n  const saveLanguage = useCallback(lang => {\n    if (language !== lang) {\n      setLanguage(lang);\n      try {\n        localStorage.setItem(LANGUAGE_KEY, lang);\n      } catch {}\n    }\n  }, [language, setLanguage]);\n\n  // click outside for dropdowns\n  useEffect(() => {\n    const onDocClick = e => {\n      if (signinRef.current && !signinRef.current.contains(e.target)) setSigninOpen(false);\n      if (profileRef.current && !profileRef.current.contains(e.target)) setProfileOpen(false);\n    };\n    document.addEventListener('click', onDocClick, true);\n    return () => document.removeEventListener('click', onDocClick, true);\n  }, []);\n\n  // load favorites\n  useEffect(() => {\n    try {\n      const v2raw = localStorage.getItem(FAVS_V2_KEY);\n      if (v2raw) {\n        const arr = JSON.parse(v2raw) || [];\n        setFavs(new Map(arr.map(t => [t.name, t])));\n      } else {\n        const v1raw = localStorage.getItem(FAVS_V1_KEY);\n        if (v1raw) {\n          const names = JSON.parse(v1raw) || [];\n          const arr = names.map(name => ({\n            name\n          }));\n          localStorage.setItem(FAVS_V2_KEY, JSON.stringify(arr));\n          localStorage.removeItem(FAVS_V1_KEY);\n          setFavs(new Map(arr.map(t => [t.name, t])));\n        }\n      }\n    } catch {}\n  }, []);\n  function saveFavs(next) {\n    setFavs(new Map(next));\n    try {\n      localStorage.setItem(FAVS_V2_KEY, JSON.stringify(Array.from(next.values())));\n    } catch {}\n  }\n  function toggleFav(tool) {\n    const next = new Map(favs);\n    if (next.has(tool.name)) next.delete(tool.name);else next.set(tool.name, {\n      name: tool.name,\n      icon: tool.icon,\n      link: tool.link\n    });\n    saveFavs(next);\n  }\n\n  // load recents\n  useEffect(() => {\n    try {\n      const raw = localStorage.getItem(RECENT_KEY);\n      if (raw) setRecents(JSON.parse(raw));\n    } catch {}\n  }, []);\n  function pushRecent(prompt) {\n    const p = prompt.trim();\n    if (!p) return;\n    const next = [p, ...recents.filter(r => r !== p)].slice(0, RECENT_MAX);\n    setRecents(next);\n    try {\n      localStorage.setItem(RECENT_KEY, JSON.stringify(next));\n    } catch {}\n  }\n  function removeRecent(prompt) {\n    const next = recents.filter(r => r !== prompt);\n    setRecents(next);\n    try {\n      localStorage.setItem(RECENT_KEY, JSON.stringify(next));\n    } catch {}\n  }\n  function clearRecents() {\n    setRecents([]);\n    try {\n      localStorage.removeItem(RECENT_KEY);\n    } catch {}\n  }\n\n  // Fixed fetchPlan function with cache busting\n  async function fetchPlan(prompt) {\n    const timestamp = Date.now();\n    const res = await fetch(`${API_BASE}/plan?t=${timestamp}`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'Cache-Control': 'no-cache, no-store, must-revalidate',\n        'Pragma': 'no-cache',\n        'Expires': '0'\n      },\n      body: JSON.stringify({\n        user_goal: prompt\n      })\n    });\n    if (!res.ok) throw new Error('Failed to fetch tools from backend');\n    return res.json();\n  }\n\n  // Fixed handleFindTools function\n  const handleFindTools = useCallback(async fromPrompt => {\n    const prompt = (fromPrompt !== null && fromPrompt !== void 0 ? fromPrompt : chatInput).trim();\n    if (!prompt) return;\n\n    // Clear previous results immediately\n    setGroups([]);\n    setLastGoal('');\n    setLoading(true);\n    setError(null);\n    try {\n      // Detect language and save immediately (no timeout)\n      const detectedLang = detectLanguage(prompt);\n      saveLanguage(detectedLang);\n      const data = await fetchPlan(prompt);\n      const grouped = data.groups && data.groups.length ? data.groups : groupsFromPlanFallback(data.plan);\n      setGroups(grouped);\n      setLastGoal(data.goal || prompt);\n      pushRecent(prompt);\n\n      // Clear input after successful search\n      if (!fromPrompt) {\n        setChatInput('');\n      }\n    } catch (e) {\n      console.error('Error fetching plan:', e);\n      setError(language === 'bg' ? '⚠️ Възникна грешка при зареждането на инструментите.' : '⚠️ Something went wrong while fetching tools.');\n    } finally {\n      setLoading(false);\n    }\n  }, [chatInput, saveLanguage, language]);\n\n  // ------- Auth (cookie session) -------\n  async function handleGoogleSignIn() {\n    try {\n      const {\n        user\n      } = await openOAuthPopup('google');\n      setCurrentUser(user);\n      setError(null);\n    } catch (e) {\n      console.error(e);\n      setError(t('signInFailed'));\n    }\n  }\n  async function handleSignOut() {\n    try {\n      await logout();\n    } catch (e) {\n      console.warn('Logout error:', e);\n    }\n    setCurrentUser(null);\n  }\n  async function submitEmailAuth() {\n    setAuthSubmitting(true);\n    setAuthError(null);\n    setError(null);\n    try {\n      const url = authMode === 'signup' ? `${API_BASE}/auth/register` : `${API_BASE}/auth/login`;\n      const res = await fetch(url, {\n        method: 'POST',\n        credentials: 'include',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          email: authEmail,\n          password: authPassword,\n          name: authMode === 'signup' ? authName : undefined\n        })\n      });\n      if (!res.ok) {\n        const t = await res.text();\n        throw new Error(t || `HTTP ${res.status}`);\n      }\n      const data = await res.json();\n      setCurrentUser(data.user);\n      setShowEmailModal(false);\n      setAuthEmail('');\n      setAuthPassword('');\n      setAuthName('');\n    } catch (e) {\n      console.error(e);\n      setAuthError(authMode === 'signup' ? t('signUpFailed') : t('signInFailed'));\n    } finally {\n      setAuthSubmitting(false);\n    }\n  }\n\n  // Profile modal open\n  function openProfile() {\n    var _currentUser$name, _currentUser$picture;\n    if (!currentUser) return;\n    setProfName((_currentUser$name = currentUser.name) !== null && _currentUser$name !== void 0 ? _currentUser$name : '');\n    setProfPic((_currentUser$picture = currentUser.picture) !== null && _currentUser$picture !== void 0 ? _currentUser$picture : '');\n    setShowProfileModal(true);\n    setProfileOpen(false);\n  }\n\n  // Save profile (PATCH /auth/me)\n  async function saveProfile() {\n    if (!currentUser) return;\n    setProfSaving(true);\n    setError(null);\n    try {\n      const xsrf = getCookie('XSRF-TOKEN');\n      const res = await fetch(`${API_BASE}/auth/me`, {\n        method: 'PATCH',\n        credentials: 'include',\n        headers: {\n          'Content-Type': 'application/json',\n          ...(xsrf ? {\n            'X-XSRF-TOKEN': xsrf\n          } : {})\n        },\n        body: JSON.stringify({\n          name: profName,\n          picture: profPic\n        })\n      });\n      if (!res.ok) {\n        const t = await res.text();\n        throw new Error(t || 'Update failed');\n      }\n      const user = await res.json();\n      setCurrentUser(user);\n      setShowProfileModal(false);\n    } catch (e) {\n      console.error(e);\n      setError(t('profileUpdateFailed'));\n    } finally {\n      setProfSaving(false);\n    }\n  }\n\n  // auto-load session\n  useEffect(() => {\n    let mounted = true;\n    (async () => {\n      try {\n        const u = await fetchMe();\n        if (mounted) setCurrentUser(u);\n      } catch {\n        try {\n          await refreshSession();\n          const u2 = await fetchMe();\n          if (mounted) setCurrentUser(u2);\n        } catch {\n          if (mounted) setCurrentUser(null);\n        }\n      }\n    })();\n    return () => {\n      mounted = false;\n    };\n  }, []);\n\n  // Filtering logic\n  const term = searchQuery.trim().toLowerCase();\n  const filteredGroups = groups.map(g => ({\n    title: g.title,\n    tools: g.tools.filter(t => {\n      var _t$name;\n      const match = !term || g.title.toLowerCase().includes(term) || ((_t$name = t.name) !== null && _t$name !== void 0 ? _t$name : '').toLowerCase().includes(term);\n      const favOk = !showFavsOnly || favs.has(t.name);\n      return match && favOk;\n    })\n  })).filter(g => g.tools.length > 0);\n  const favCount = favs.size;\n\n  // Stable input change handler to prevent focus loss\n  const handleChatInputChange = useCallback(e => {\n    setChatInput(e.target.value);\n  }, []);\n  const handleKeyDown = useCallback(e => {\n    if (e.key === 'Enter') {\n      e.preventDefault();\n      handleFindTools();\n    }\n  }, [handleFindTools]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50\",\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"sticky top-0 z-50 bg-white/80 backdrop-blur-xl border-b border-slate-200/50\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"max-w-6xl mx-auto px-4 py-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-between\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center gap-3 cursor-pointer\",\n            onClick: goHome,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"w-9 h-9 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl flex items-center justify-center shadow-lg shadow-blue-500/25\",\n              children: /*#__PURE__*/_jsxDEV(Sparkles, {\n                className: \"w-5 h-5 text-white\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 603,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 602,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-xl text-slate-800 font-semibold\",\n              children: \"My AI\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 605,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 601,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"nav\", {\n            className: \"hidden md:flex items-center gap-8\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: goHome,\n              className: `font-medium transition-colors ${view === 'home' ? 'text-blue-600' : 'text-slate-600 hover:text-blue-600'}`,\n              children: t('discover')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 610,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: goCategories,\n              className: `font-medium transition-colors ${view === 'categories' ? 'text-blue-600' : 'text-slate-600 hover:text-blue-600'}`,\n              children: t('categories')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 616,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n              href: \"#\",\n              className: \"text-slate-600 hover:text-blue-600 font-medium transition-colors\",\n              children: t('learn')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 622,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: goFavorites,\n              className: `inline-flex items-center gap-2 font-medium transition-colors ${view === 'favorites' ? 'text-blue-600' : 'text-slate-700 hover:text-blue-600'}`,\n              title: t('favorites'),\n              children: [/*#__PURE__*/_jsxDEV(Star, {\n                className: `w-4 h-4 ${favCount ? 'fill-yellow-400 text-yellow-500' : ''}`\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 632,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"hidden lg:inline\",\n                children: t('favorites')\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 633,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-xs bg-slate-100 text-slate-600 px-2 py-1 rounded-full\",\n                children: favCount\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 634,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 625,\n              columnNumber: 15\n            }, this), currentUser ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"relative\",\n              ref: profileRef,\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => setProfileOpen(!profileOpen),\n                className: \"flex items-center gap-2 hover:bg-slate-50 p-2 rounded-xl transition-colors\",\n                title: currentUser.email,\n                children: [currentUser.picture ? /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: currentUser.picture,\n                  alt: \"avatar\",\n                  className: \"w-8 h-8 rounded-full border border-slate-200\",\n                  referrerPolicy: \"no-referrer\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 646,\n                  columnNumber: 23\n                }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"w-8 h-8 rounded-full bg-blue-200\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 653,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-slate-700 font-medium max-w-[120px] truncate hidden lg:block\",\n                  children: currentUser.name || currentUser.email\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 655,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 640,\n                columnNumber: 19\n              }, this), profileOpen && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"absolute right-0 mt-2 w-56 bg-white rounded-2xl shadow-xl border border-slate-200/60 p-1 z-50\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: openProfile,\n                  className: \"w-full text-left px-3 py-2 rounded-xl hover:bg-slate-50 transition-colors\",\n                  children: t('profile')\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 661,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"my-1 border-t border-slate-100\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 664,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: handleSignOut,\n                  className: \"w-full text-left px-3 py-2 rounded-xl hover:bg-slate-50 transition-colors text-red-600\",\n                  children: t('signOut')\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 665,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 660,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 639,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"relative\",\n              ref: signinRef,\n              children: [/*#__PURE__*/_jsxDEV(Button, {\n                variant: \"outline\",\n                size: \"sm\",\n                onClick: () => setSigninOpen(!signinOpen),\n                className: \"border-blue-300 text-blue-600 hover:bg-blue-50 font-medium\",\n                children: t('signIn')\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 673,\n                columnNumber: 19\n              }, this), signinOpen && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"absolute right-0 mt-2 w-64 bg-white rounded-2xl shadow-2xl border border-slate-200/60 p-1 z-50\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => {\n                    setSigninOpen(false);\n                    setAuthMode('signup');\n                    setShowEmailModal(true);\n                  },\n                  className: \"w-full flex items-center px-3 py-2 rounded-xl hover:bg-slate-50 transition-colors\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"w-6 h-6 rounded-md bg-slate-200 mr-3\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 687,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex flex-col items-start\",\n                    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"text-slate-800 font-medium\",\n                      children: t('createAccount')\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 689,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"text-slate-400 text-xs\",\n                      children: t('emailPassword')\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 690,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 688,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 683,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"my-1 border-t border-slate-100\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 693,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => {\n                    setSigninOpen(false);\n                    handleGoogleSignIn();\n                  },\n                  className: \"w-full flex items-center px-3 py-2 rounded-xl hover:bg-slate-50 transition-colors\",\n                  children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                    src: \"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg\",\n                    alt: \"Google\",\n                    className: \"w-4 h-4 mr-3\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 698,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-slate-800 font-medium\",\n                    children: t('signInWithGoogle')\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 699,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 694,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 682,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 672,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 609,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"outline\",\n            size: \"sm\",\n            className: \"md:hidden\",\n            onClick: () => setMobileMenuOpen(!mobileMenuOpen),\n            children: /*#__PURE__*/_jsxDEV(Menu, {\n              className: \"w-4 h-4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 714,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 708,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 599,\n          columnNumber: 11\n        }, this), mobileMenuOpen && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"md:hidden mt-4 pb-4 border-t border-slate-200/50 pt-4\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => {\n                goHome();\n                setMobileMenuOpen(false);\n              },\n              className: \"block w-full text-left px-3 py-2 rounded-xl hover:bg-slate-50 transition-colors font-medium\",\n              children: t('discover')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 722,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => {\n                goCategories();\n                setMobileMenuOpen(false);\n              },\n              className: \"block w-full text-left px-3 py-2 rounded-xl hover:bg-slate-50 transition-colors font-medium\",\n              children: t('categories')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 725,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => {\n                goFavorites();\n                setMobileMenuOpen(false);\n              },\n              className: \"block w-full text-left px-3 py-2 rounded-xl hover:bg-slate-50 transition-colors font-medium\",\n              children: [t('favorites'), \" (\", favCount, \")\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 728,\n              columnNumber: 17\n            }, this), !currentUser && /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => {\n                setShowEmailModal(true);\n                setMobileMenuOpen(false);\n              },\n              className: \"block w-full text-left px-3 py-2 rounded-xl hover:bg-slate-50 transition-colors font-medium text-blue-600\",\n              children: t('signIn')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 732,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 721,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 720,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 598,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 597,\n      columnNumber: 7\n    }, this), showEmailModal && /*#__PURE__*/_jsxDEV(AuthModal, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 743,\n      columnNumber: 26\n    }, this), showProfileModal && currentUser && /*#__PURE__*/_jsxDEV(ProfileModal, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 744,\n      columnNumber: 43\n    }, this), view === 'home' ? /*#__PURE__*/_jsxDEV(HomeView, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 747,\n      columnNumber: 26\n    }, this) : view === 'favorites' ? /*#__PURE__*/_jsxDEV(FavoritesView, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 747,\n      columnNumber: 64\n    }, this) : /*#__PURE__*/_jsxDEV(CategoriesView, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 747,\n      columnNumber: 84\n    }, this), /*#__PURE__*/_jsxDEV(\"nav\", {\n      className: \"fixed bottom-0 left-0 right-0 bg-white/80 backdrop-blur-xl border-t border-slate-200/50 md:hidden z-50\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-around py-2\",\n        children: [{\n          name: t('home'),\n          icon: Grid3x3,\n          active: activeTab === 'Home',\n          action: () => {\n            goHome();\n            setActiveTab('Home');\n          }\n        }, {\n          name: t('categories'),\n          icon: MessageCircle,\n          active: activeTab === 'Categories',\n          action: () => {\n            goCategories();\n            setActiveTab('Categories');\n          }\n        }, {\n          name: t('favorites'),\n          icon: Heart,\n          active: activeTab === 'Favorites',\n          action: () => {\n            goFavorites();\n            setActiveTab('Favorites');\n          }\n        }, {\n          name: t('profile'),\n          icon: User,\n          active: activeTab === 'Profile',\n          action: () => setActiveTab('Profile')\n        }].map(item => {\n          const IconComponent = item.icon;\n          return /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: item.action,\n            className: `flex flex-col items-center py-2 px-3 rounded-xl transition-colors ${item.active ? 'text-blue-600 bg-blue-50' : 'text-slate-400 hover:text-slate-600'}`,\n            children: [/*#__PURE__*/_jsxDEV(IconComponent, {\n              className: \"w-5 h-5 mb-1\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 767,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-xs font-medium\",\n              children: item.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 768,\n              columnNumber: 17\n            }, this)]\n          }, item.name, true, {\n            fileName: _jsxFileName,\n            lineNumber: 760,\n            columnNumber: 15\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 751,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 750,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 595,\n    columnNumber: 5\n  }, this);\n\n  // Auth Modal Component\n  function AuthModal() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fixed inset-0 z-50 flex items-center justify-center bg-black/30 backdrop-blur-sm\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white w-full max-w-md rounded-2xl shadow-2xl p-6 mx-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-between mb-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-xl font-semibold text-slate-800\",\n            children: authMode === 'signup' ? t('createYourAccount') : t('signInToAccount')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 783,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setShowEmailModal(false),\n            className: \"text-slate-500 hover:text-slate-700 p-1\",\n            children: /*#__PURE__*/_jsxDEV(X, {\n              className: \"w-5 h-5\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 787,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 786,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 782,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-4\",\n          children: [authMode === 'signup' && /*#__PURE__*/_jsxDEV(Input, {\n            placeholder: t('yourName'),\n            value: authName,\n            onChange: e => setAuthName(e.target.value),\n            className: \"h-12 rounded-xl\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 793,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            placeholder: t('email'),\n            type: \"email\",\n            value: authEmail,\n            onChange: e => setAuthEmail(e.target.value),\n            className: \"h-12 rounded-xl\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 800,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            placeholder: t('password'),\n            type: \"password\",\n            value: authPassword,\n            onChange: e => setAuthPassword(e.target.value),\n            className: \"h-12 rounded-xl\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 807,\n            columnNumber: 13\n          }, this), authError && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-red-600 text-sm p-3 bg-red-50 rounded-xl\",\n            children: authError\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 814,\n            columnNumber: 27\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 791,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-between mt-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setAuthMode(authMode === 'signup' ? 'signin' : 'signup'),\n            className: \"text-sm text-blue-600 hover:underline\",\n            children: authMode === 'signup' ? t('alreadyHaveAccount') : t('dontHaveAccount')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 818,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex gap-3\",\n            children: [/*#__PURE__*/_jsxDEV(Button, {\n              variant: \"outline\",\n              onClick: () => setShowEmailModal(false),\n              children: t('cancel')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 825,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              onClick: submitEmailAuth,\n              disabled: authSubmitting,\n              className: \"bg-gradient-to-r from-blue-600 to-indigo-600\",\n              children: authMode === 'signup' ? t('createAccount') : t('signIn')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 826,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 824,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 817,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-center text-xs text-slate-400 mb-3\",\n            children: t('orContinueWith')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 833,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            onClick: () => {\n              setShowEmailModal(false);\n              handleGoogleSignIn();\n            },\n            className: \"w-full bg-white border border-slate-200 text-slate-800 hover:bg-slate-50 h-12\",\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: \"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg\",\n              alt: \"Google\",\n              className: \"w-5 h-5 mr-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 838,\n              columnNumber: 15\n            }, this), t('google')]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 834,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 832,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 781,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 780,\n      columnNumber: 7\n    }, this);\n  }\n\n  // Profile Modal Component\n  function ProfileModal() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fixed inset-0 z-50 flex items-center justify-center bg-black/30 backdrop-blur-sm\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white w-full max-w-md rounded-2xl shadow-2xl p-6 mx-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-between mb-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-xl font-semibold text-slate-800\",\n            children: t('yourProfile')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 853,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setShowProfileModal(false),\n            className: \"text-slate-500 hover:text-slate-700 p-1\",\n            children: /*#__PURE__*/_jsxDEV(X, {\n              className: \"w-5 h-5\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 855,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 854,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 852,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center gap-4 mb-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"w-16 h-16 rounded-full overflow-hidden bg-slate-100 border-2 border-slate-200\",\n            children: profPic ? /*#__PURE__*/_jsxDEV(\"img\", {\n              src: profPic,\n              className: \"w-full h-full object-cover\",\n              referrerPolicy: \"no-referrer\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 862,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"w-full h-full bg-blue-200\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 864,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 860,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex-1\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-xs text-slate-500 mb-1\",\n              children: t('email')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 868,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-slate-800 font-medium\",\n              children: currentUser.email\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 869,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 867,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 859,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"text-sm font-medium text-slate-700 mb-2 block\",\n              children: t('name')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 875,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Input, {\n              placeholder: t('name'),\n              value: profName,\n              onChange: e => setProfName(e.target.value),\n              className: \"h-12 rounded-xl\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 876,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 874,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"text-sm font-medium text-slate-700 mb-2 block\",\n              children: t('avatarUrl')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 884,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Input, {\n              placeholder: \"https://...\",\n              value: profPic,\n              onChange: e => setProfPic(e.target.value),\n              className: \"h-12 rounded-xl\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 885,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 883,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 873,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-end gap-3 mt-8\",\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            variant: \"outline\",\n            onClick: () => setShowProfileModal(false),\n            children: t('cancel')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 895,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            onClick: saveProfile,\n            disabled: profSaving,\n            className: \"bg-gradient-to-r from-blue-600 to-indigo-600\",\n            children: t('saveChanges')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 896,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 894,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 851,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 850,\n      columnNumber: 7\n    }, this);\n  }\n\n  // Home View Component with BOTH PlanMindMap AND Results sections\n  function HomeView() {\n    return /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"max-w-6xl mx-auto px-4 py-8 pb-24 md:pb-12\",\n      children: [/*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"text-center mb-16\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-4xl md:text-5xl text-slate-800 mb-6 font-bold tracking-tight\",\n          children: [t('heroTitle'), \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent\",\n            children: t('heroTitleHighlight')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 912,\n            columnNumber: 30\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 911,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-xl text-slate-600 mb-10 max-w-2xl mx-auto leading-relaxed\",\n          children: t('heroSubtitle')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 914,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"max-w-2xl mx-auto mb-8\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"relative bg-white/80 backdrop-blur-sm rounded-3xl p-6 border border-slate-200/50 shadow-2xl shadow-blue-500/10\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center gap-4 mb-4\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"w-12 h-12 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-2xl flex items-center justify-center shadow-lg shadow-blue-500/25\",\n                children: /*#__PURE__*/_jsxDEV(MessageCircle, {\n                  className: \"w-6 h-6 text-white\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 923,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 922,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-slate-700 text-lg font-medium\",\n                children: t('inputPlaceholder')\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 925,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 921,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex gap-3\",\n              children: [/*#__PURE__*/_jsxDEV(Input, {\n                placeholder: language === 'bg' ? 'напр., Писане на по-добри имейли, създаване на лого, анализ на данни...' : 'e.g., Write better emails, create a logo, analyze data...',\n                autoFocus: true,\n                value: chatInput,\n                onChange: handleChatInputChange,\n                onKeyDown: handleKeyDown,\n                className: \"flex-1 bg-slate-50/80 border-slate-200 text-base h-14 rounded-2xl px-5 font-medium placeholder:text-slate-400\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 928,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                onClick: () => handleFindTools(),\n                className: \"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 px-6 h-14 rounded-2xl shadow-lg shadow-blue-500/25 font-medium\",\n                disabled: loading,\n                children: [/*#__PURE__*/_jsxDEV(Zap, {\n                  className: \"w-5 h-5 mr-2\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 941,\n                  columnNumber: 19\n                }, this), \" \", t('findTools')]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 936,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 927,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 920,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 919,\n          columnNumber: 11\n        }, this), recents.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"max-w-2xl mx-auto mb-10\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center justify-between mb-3 px-1\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center gap-2 text-slate-600\",\n              children: [/*#__PURE__*/_jsxDEV(History, {\n                className: \"w-4 h-4\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 952,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-sm font-medium\",\n                children: t('recentPrompts')\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 953,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 951,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"text-xs text-slate-400 hover:text-slate-600 transition-colors\",\n              onClick: clearRecents,\n              children: t('clearAll')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 955,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 950,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex flex-wrap gap-2\",\n            children: recents.map(prompt => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"group inline-flex items-center max-w-full bg-white/90 border border-slate-200/60 rounded-xl px-3 py-2 shadow-sm hover:shadow-md transition-shadow\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"text-sm text-slate-700 truncate max-w-[200px] hover:text-blue-600 transition-colors\",\n                title: prompt,\n                onClick: () => {\n                  setChatInput(prompt);\n                  handleFindTools(prompt);\n                },\n                children: prompt\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 962,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"ml-2 text-slate-400 hover:text-red-500 transition-colors p-1\",\n                onClick: () => removeRecent(prompt),\n                \"aria-label\": \"remove\",\n                title: \"Remove\",\n                children: /*#__PURE__*/_jsxDEV(X, {\n                  className: \"w-3 h-3\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 975,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 969,\n                columnNumber: 21\n              }, this)]\n            }, prompt, true, {\n              fileName: _jsxFileName,\n              lineNumber: 961,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 959,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 949,\n          columnNumber: 13\n        }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-red-600 font-medium mb-6 p-4 bg-red-50 rounded-2xl border border-red-200 max-w-2xl mx-auto\",\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 985,\n          columnNumber: 13\n        }, this), loading && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-blue-600 font-medium mb-6 p-4 bg-blue-50 rounded-2xl border border-blue-200 max-w-2xl mx-auto\",\n          children: t('loading')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 990,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 910,\n        columnNumber: 9\n      }, this), filteredGroups.length > 0 && /*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"mb-12\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-col sm:flex-row gap-4 mb-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"relative flex-1\",\n            children: [/*#__PURE__*/_jsxDEV(Search, {\n              className: \"absolute left-4 top-1/2 transform -translate-y-1/2 text-slate-400 w-5 h-5\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1001,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Input, {\n              placeholder: t('searchPlaceholder'),\n              value: searchQuery,\n              onChange: e => setSearchQuery(e.target.value),\n              className: \"pl-12 bg-white/80 border-slate-200/50 h-12 rounded-2xl backdrop-blur-sm font-medium\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1002,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1000,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"inline-flex items-center gap-2 text-slate-700 bg-white/80 border border-slate-200/50 rounded-2xl px-4 h-12 whitespace-nowrap\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"checkbox\",\n              checked: showFavsOnly,\n              onChange: e => setShowFavsOnly(e.target.checked),\n              className: \"accent-blue-600 w-4 h-4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1010,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-sm font-medium\",\n              children: t('favoritesOnly')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1016,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-xs text-slate-400\",\n              children: [\"(\", favCount, \")\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1017,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1009,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 999,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 998,\n        columnNumber: 11\n      }, this), filteredGroups.length > 0 && /*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"mb-16\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center gap-3 mb-8\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"w-10 h-10 bg-gradient-to-br from-purple-500 to-indigo-600 rounded-2xl flex items-center justify-center shadow-lg shadow-purple-500/25\",\n            children: /*#__PURE__*/_jsxDEV(Wand2, {\n              className: \"w-5 h-5 text-white\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1028,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1027,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              className: \"text-2xl text-slate-800 font-bold\",\n              children: t('journeyTitle')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1031,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-slate-600 text-sm\",\n              children: t('journeySubtitle')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1032,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1030,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1026,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(PlanMindMap, {\n          goal: lastGoal || chatInput,\n          steps: filteredGroups,\n          onOpenTool: handleOpenTool,\n          language: language,\n          buildPrompt: buildPromptCallback\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1035,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1025,\n        columnNumber: 11\n      }, this), filteredGroups.length === 0 && !loading && groups.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center py-20\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-20 h-20 bg-slate-100 rounded-3xl flex items-center justify-center mx-auto mb-6\",\n          children: /*#__PURE__*/_jsxDEV(Sparkles, {\n            className: \"w-10 h-10 text-slate-400\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1049,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1048,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-slate-800 mb-3 font-bold text-xl\",\n          children: t('readyTitle')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1051,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-slate-600\",\n          children: t('readySubtitle')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1052,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1047,\n        columnNumber: 11\n      }, this), filteredGroups.length === 0 && !loading && groups.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center py-16\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-20 h-20 bg-slate-100 rounded-3xl flex items-center justify-center mx-auto mb-6\",\n          children: /*#__PURE__*/_jsxDEV(Search, {\n            className: \"w-10 h-10 text-slate-400\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1059,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1058,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-slate-800 mb-3 font-bold text-xl\",\n          children: t('noToolsTitle')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1061,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-slate-600\",\n          children: t('noToolsSubtitle')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1062,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1057,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 908,\n      columnNumber: 7\n    }, this);\n  }\n\n  // Favorites View Component\n  function FavoritesView() {\n    return /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"max-w-6xl mx-auto px-4 py-8 pb-24 md:pb-12\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-between mb-8\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center gap-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: goHome,\n            className: \"inline-flex items-center gap-2 text-slate-600 hover:text-blue-600 transition-colors p-2 -ml-2 rounded-xl\",\n            children: [/*#__PURE__*/_jsxDEV(ArrowLeft, {\n              className: \"w-4 h-4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1076,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"font-medium\",\n              children: t('back')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1077,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1075,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"w-px h-6 bg-slate-300\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1079,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"text-2xl text-slate-800 font-bold\",\n            children: t('myFavorites')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1080,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1074,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-slate-500 font-medium bg-slate-100 px-3 py-1 rounded-full text-sm\",\n          children: [favCount, \" \", t('savedCount')]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1082,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1073,\n        columnNumber: 9\n      }, this), favCount === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center py-20\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-20 h-20 bg-slate-100 rounded-3xl flex items-center justify-center mx-auto mb-6\",\n          children: /*#__PURE__*/_jsxDEV(Star, {\n            className: \"w-10 h-10 text-slate-400\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1090,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1089,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-slate-800 mb-3 font-bold text-xl\",\n          children: t('noFavoritesTitle')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1092,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-slate-600 mb-8\",\n          children: t('noFavoritesSubtitle')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1093,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          onClick: goHome,\n          className: \"bg-gradient-to-r from-blue-600 to-indigo-600\",\n          children: t('discoverTools')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1094,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1088,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid sm:grid-cols-2 lg:grid-cols-3 gap-6\",\n        children: Array.from(favs.values()).map(tool => /*#__PURE__*/_jsxDEV(ToolCard, {\n          tool: tool,\n          isFav: true,\n          onToggleFav: () => toggleFav(tool)\n        }, `fav-${tool.name}`, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1101,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1099,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1072,\n      columnNumber: 7\n    }, this);\n  }\n\n  // Tool Card Component (used in FavoritesView)\n  function ToolCard({\n    tool,\n    isFav,\n    onToggleFav\n  }) {\n    return /*#__PURE__*/_jsxDEV(Card, {\n      className: \"border-slate-200/50 hover:shadow-xl transition-all duration-300 hover:-translate-y-1 bg-white/90 backdrop-blur-sm group\",\n      children: /*#__PURE__*/_jsxDEV(CardContent, {\n        className: \"p-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-start justify-between mb-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"w-14 h-14 rounded-2xl overflow-hidden bg-gradient-to-br from-blue-400 to-indigo-500 flex items-center justify-center shadow-lg group-hover:scale-105 transition-transform duration-300\",\n            children: 'icon' in tool && tool.icon ? /*#__PURE__*/_jsxDEV(\"img\", {\n              src: tool.icon,\n              alt: tool.name,\n              className: \"w-8 h-8 object-contain\",\n              loading: \"lazy\",\n              referrerPolicy: \"no-referrer\",\n              onError: e => {\n                const img = e.currentTarget;\n                img.onerror = null;\n                img.style.display = 'none';\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1122,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(Sparkles, {\n              className: \"w-7 h-7 text-white\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1135,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1120,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: onToggleFav,\n            className: `flex items-center gap-1 px-3 py-1.5 rounded-xl border transition-all ${isFav ? 'bg-yellow-100 border-yellow-200 text-yellow-700 hover:bg-yellow-200' : 'bg-white border-slate-200 text-slate-500 hover:bg-slate-50 hover:border-slate-300'}`,\n            title: isFav ? t('removeFromFavorites') : t('addToFavorites'),\n            children: [/*#__PURE__*/_jsxDEV(Star, {\n              className: `w-4 h-4 ${isFav ? 'fill-current' : ''}`\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1148,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-sm font-medium hidden sm:inline\",\n              children: isFav ? t('saved') : t('save')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1149,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1139,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1119,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-slate-800 mb-3 font-bold text-lg leading-tight\",\n          children: tool.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1155,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex gap-2 mb-5\",\n          children: [/*#__PURE__*/_jsxDEV(Badge, {\n            variant: \"secondary\",\n            className: \"text-xs bg-blue-100 text-blue-700 font-medium px-2 py-1\",\n            children: t('aiTool')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1158,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Badge, {\n            variant: \"secondary\",\n            className: \"text-xs font-medium px-2 py-1 bg-emerald-100 text-emerald-700\",\n            children: t('free')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1161,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1157,\n          columnNumber: 11\n        }, this), 'link' in tool && tool.link ? /*#__PURE__*/_jsxDEV(\"a\", {\n          href: tool.link,\n          target: \"_blank\",\n          rel: \"noreferrer noopener\",\n          className: \"block w-full text-center bg-gradient-to-r from-red-500 to-pink-500 hover:from-red-600 hover:to-pink-600 text-white rounded-2xl h-11 leading-[44px] font-medium shadow-lg shadow-red-500/25 transition-all duration-200\",\n          children: t('openTool')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1167,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(Button, {\n          disabled: true,\n          className: \"w-full rounded-2xl h-11 bg-slate-100 text-slate-400\",\n          children: t('noLink')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1176,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1118,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1117,\n      columnNumber: 7\n    }, this);\n  }\n\n  // Categories View Component\n  function CategoriesView() {\n    _s();\n    const [searchQuery, setSearchQuery] = useState('');\n    const [loading, setLoading] = useState(true);\n\n    // Categories data based on comprehensive AI tools research\n    const categories = [{\n      id: 'assistants-productivity',\n      label: language === 'bg' ? 'Асистенти и продуктивност' : 'Assistants & Productivity',\n      emoji: '🤖',\n      description: language === 'bg' ? 'Умни помощници и инструменти за повишаване на продуктивността' : 'Smart assistants and productivity enhancement tools',\n      count: 48,\n      gradient: 'from-blue-500 to-indigo-600'\n    }, {\n      id: 'text-writing',\n      label: language === 'bg' ? 'Генерация на текст и писане' : 'Text Generation & Writing',\n      emoji: '✍️',\n      description: language === 'bg' ? 'Създаване, редактиране и подобряване на текстово съдържание' : 'Creating, editing and improving written content',\n      count: 42,\n      gradient: 'from-emerald-500 to-teal-600'\n    }, {\n      id: 'images-design',\n      label: language === 'bg' ? 'Изображения и дизайн' : 'Images & Design',\n      emoji: '🎨',\n      description: language === 'bg' ? 'Генериране, редактиране и дизайн на визуално съдържание' : 'Generate, edit and design visual content',\n      count: 39,\n      gradient: 'from-purple-500 to-pink-600'\n    }, {\n      id: 'video-3d',\n      label: language === 'bg' ? 'Видео и 3D' : 'Video & 3D',\n      emoji: '🎬',\n      description: language === 'bg' ? 'Създаване и редактиране на видео и 3D съдържание' : 'Create and edit video and 3D content',\n      count: 35,\n      gradient: 'from-red-500 to-orange-600'\n    }, {\n      id: 'audio-music',\n      label: language === 'bg' ? 'Аудио и музика' : 'Audio & Music',\n      emoji: '🎵',\n      description: language === 'bg' ? 'Генериране на звук, музика и гласови записи' : 'Generate sound, music and voice recordings',\n      count: 28,\n      gradient: 'from-amber-500 to-yellow-600'\n    }, {\n      id: 'business-marketing',\n      label: language === 'bg' ? 'Бизнес, маркетинг и социални медии' : 'Business, Marketing & Social Media',\n      emoji: '📈',\n      description: language === 'bg' ? 'Инструменти за бизнес, маркетинг и социални мрежи' : 'Tools for business, marketing and social networks',\n      count: 44,\n      gradient: 'from-cyan-500 to-blue-600'\n    }, {\n      id: 'coding-development',\n      label: language === 'bg' ? 'Кодиране и разработка' : 'Coding & Development',\n      emoji: '💻',\n      description: language === 'bg' ? 'Помощници за програмиране и разработка на софтуер' : 'Programming assistants and software development',\n      count: 33,\n      gradient: 'from-slate-600 to-gray-700'\n    }, {\n      id: 'automation-agents',\n      label: language === 'bg' ? 'Автоматизация и агенти' : 'Automation & AI Agents',\n      emoji: '⚡',\n      description: language === 'bg' ? 'Автоматизация на процеси и интелигентни AI агенти' : 'Process automation and intelligent AI agents',\n      count: 26,\n      gradient: 'from-violet-500 to-purple-600'\n    }, {\n      id: 'data-analysis',\n      label: language === 'bg' ? 'Данни и анализ' : 'Data & Analysis',\n      emoji: '📊',\n      description: language === 'bg' ? 'Анализ на данни и бизнес аналитика' : 'Data analysis and business intelligence',\n      count: 31,\n      gradient: 'from-teal-600 to-emerald-700'\n    }, {\n      id: 'education-learning',\n      label: language === 'bg' ? 'Образование и обучение' : 'Education & Learning',\n      emoji: '🎓',\n      description: language === 'bg' ? 'Инструменти за учене и образователни помощници' : 'Learning tools and educational assistants',\n      count: 23,\n      gradient: 'from-indigo-500 to-blue-600'\n    }, {\n      id: 'health-wellness',\n      label: language === 'bg' ? 'Здраве и благополучие' : 'Health & Wellness',\n      emoji: '🏥',\n      description: language === 'bg' ? 'AI решения за здраве и лична стност развитие' : 'AI solutions for health and personal development',\n      count: 19,\n      gradient: 'from-green-500 to-emerald-600'\n    }, {\n      id: 'specialized-niche',\n      label: language === 'bg' ? 'Специализирани/нишови' : 'Specialized & Niche',\n      emoji: '🎯',\n      description: language === 'bg' ? 'Специални инструменти за конкретни области и професии' : 'Special tools for specific fields and professions',\n      count: 27,\n      gradient: 'from-rose-500 to-pink-600'\n    }];\n\n    // Filter categories based on search\n    const filteredCategories = categories.filter(category => category.label.toLowerCase().includes(searchQuery.toLowerCase()) || category.description.toLowerCase().includes(searchQuery.toLowerCase()));\n    useEffect(() => {\n      // Simulate loading\n      setTimeout(() => setLoading(false), 500);\n    }, []);\n    return /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"max-w-6xl mx-auto px-4 py-8 pb-24 md:pb-12\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-between mb-8\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center gap-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: goHome,\n            className: \"inline-flex items-center gap-2 text-slate-600 hover:text-blue-600 transition-colors p-2 -ml-2 rounded-xl\",\n            children: [/*#__PURE__*/_jsxDEV(ArrowLeft, {\n              className: \"w-4 h-4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1307,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"font-medium\",\n              children: t('back')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1308,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1306,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"w-px h-6 bg-slate-300\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1310,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n              className: \"text-3xl text-slate-800 font-bold\",\n              children: t('categoriesTitle')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1312,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-slate-600 text-sm mt-1\",\n              children: t('categoriesSubtitle')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1313,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1311,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1305,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1304,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-8\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"relative max-w-md\",\n          children: [/*#__PURE__*/_jsxDEV(Search, {\n            className: \"absolute left-4 top-1/2 transform -translate-y-1/2 text-slate-400 w-5 h-5\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1321,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            placeholder: t('searchCategories'),\n            value: searchQuery,\n            onChange: e => setSearchQuery(e.target.value),\n            className: \"pl-12 bg-white/80 border-slate-200/50 h-12 rounded-2xl backdrop-blur-sm font-medium\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1322,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1320,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1319,\n        columnNumber: 9\n      }, this), loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid sm:grid-cols-2 lg:grid-cols-3 gap-6\",\n        children: Array.from({\n          length: 9\n        }).map((_, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"h-40 bg-slate-100 rounded-3xl animate-pulse\"\n        }, i, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1335,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1333,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid sm:grid-cols-2 lg:grid-cols-3 gap-6\",\n        children: filteredCategories.map(category => /*#__PURE__*/_jsxDEV(Card, {\n          className: \"group border-slate-200/50 hover:shadow-2xl transition-all duration-300 hover:-translate-y-2 bg-white/90 backdrop-blur-sm cursor-pointer overflow-hidden\",\n          onClick: () => {\n            // For now, just simulate category click - you can extend this to show tools in category\n            console.log(`Clicked category: ${category.id}`);\n          },\n          children: /*#__PURE__*/_jsxDEV(CardContent, {\n            className: \"p-6 relative\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: `absolute inset-0 bg-gradient-to-br ${category.gradient} opacity-5 group-hover:opacity-10 transition-opacity duration-300`\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1351,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"relative\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-start justify-between mb-4\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: `w-16 h-16 rounded-3xl bg-gradient-to-br ${category.gradient} flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform duration-300`,\n                  children: /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-2xl\",\n                    children: category.emoji\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1357,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1356,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-right\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"text-xs text-slate-500\",\n                    children: category.count\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1360,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"text-xs text-slate-400\",\n                    children: t('toolsInCategory')\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1361,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1359,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1355,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n                className: \"text-xl font-bold text-slate-800 mb-2 group-hover:text-slate-900 transition-colors\",\n                children: category.label\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1365,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-sm text-slate-600 mb-4 leading-relaxed\",\n                children: category.description\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1369,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center justify-between\",\n                children: [/*#__PURE__*/_jsxDEV(Badge, {\n                  variant: \"secondary\",\n                  className: `text-xs font-medium px-3 py-1 bg-gradient-to-r ${category.gradient} text-white border-0`,\n                  children: t('browseCategory')\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1374,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(ArrowLeft, {\n                  className: \"w-4 h-4 text-slate-400 rotate-180 group-hover:translate-x-1 transition-transform duration-300\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1380,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1373,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1354,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1349,\n            columnNumber: 17\n          }, this)\n        }, category.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1341,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1339,\n        columnNumber: 11\n      }, this), !loading && filteredCategories.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center py-20\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-20 h-20 bg-slate-100 rounded-3xl flex items-center justify-center mx-auto mb-6\",\n          children: /*#__PURE__*/_jsxDEV(Search, {\n            className: \"w-10 h-10 text-slate-400\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1393,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1392,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-slate-800 mb-3 font-bold text-xl\",\n          children: t('noToolsTitle')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1395,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-slate-600\",\n          children: t('noToolsSubtitle')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1396,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1391,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-12 text-center\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"inline-flex items-center gap-6 bg-white/80 border border-slate-200/50 rounded-2xl px-6 py-4 backdrop-blur-sm\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-2xl font-bold text-slate-800\",\n              children: filteredCategories.length\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1404,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-xs text-slate-500\",\n              children: t('totalCategories')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1405,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1403,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"w-px h-8 bg-slate-300\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1407,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-2xl font-bold text-slate-800\",\n              children: filteredCategories.reduce((total, cat) => total + cat.count, 0)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1409,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-xs text-slate-500\",\n              children: t('totalTools')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1412,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1408,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1402,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1401,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1302,\n      columnNumber: 7\n    }, this);\n  }\n  _s(CategoriesView, \"ObI5xCVGslSwVS0hWUU6Du1nr+M=\");\n}\n_s2(App, \"SInGLqkv95+Lvd/kUy2ZUzFlsuw=\", false, function () {\n  return [useLanguage, useTranslations];\n});\n_c = App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useEffect","useRef","useState","useCallback","Search","Star","MessageCircle","Zap","Sparkles","History","X","ArrowLeft","Grid3x3","Heart","User","Menu","Wand2","Button","Input","Badge","Card","CardContent","openOAuthPopup","fetchMe","refreshSession","logout","PlanMindMap","useLanguage","useTranslations","jsxDEV","_jsxDEV","API_BASE","_env","import","meta","env","VITE_API_BASE","window","__API_BASE__","detectLanguage","text","trim","length","bulgarianChars","bulgarianMatches","match","bulgarianRatio","FAVS_V2_KEY","FAVS_V1_KEY","RECENT_KEY","RECENT_MAX","LANGUAGE_KEY","groupsFromPlanFallback","plan","byTitle","Map","p","_byTitle$get","title","task","bucket","get","t","tools","set","name","Array","from","entries","map","values","buildStepPrompt","goal","stepTitle","language","isBg","stepLower","toLowerCase","goalLower","goalPlaceholder","actionablePrompt","includes","toolNames","join","toolGuidance","getCookie","parts","document","cookie","split","part","eq","indexOf","key","decodeURIComponent","slice","val","getViewFromHash","location","hash","goHome","scrollTo","top","behavior","goFavorites","goCategories","App","_s2","_s","$RefreshSig$","view","setView","activeTab","setActiveTab","setLanguage","searchQuery","setSearchQuery","chatInput","setChatInput","groups","setGroups","loading","setLoading","error","setError","currentUser","setCurrentUser","lastGoal","setLastGoal","signinOpen","setSigninOpen","signinRef","profileOpen","setProfileOpen","profileRef","mobileMenuOpen","setMobileMenuOpen","showEmailModal","setShowEmailModal","authMode","setAuthMode","authEmail","setAuthEmail","authPassword","setAuthPassword","authName","setAuthName","authSubmitting","setAuthSubmitting","authError","setAuthError","showProfileModal","setShowProfileModal","profName","setProfName","profPic","setProfPic","profSaving","setProfSaving","favs","setFavs","showFavsOnly","setShowFavsOnly","recents","setRecents","translationsCtx","handleOpenTool","tool","link","open","buildPromptCallback","onHash","addEventListener","removeEventListener","savedLang","localStorage","getItem","saveLanguage","lang","setItem","onDocClick","e","current","contains","target","v2raw","arr","JSON","parse","v1raw","names","stringify","removeItem","saveFavs","next","toggleFav","has","delete","icon","raw","pushRecent","prompt","filter","r","removeRecent","clearRecents","fetchPlan","timestamp","Date","now","res","fetch","method","headers","body","user_goal","ok","Error","json","handleFindTools","fromPrompt","detectedLang","data","grouped","console","handleGoogleSignIn","user","handleSignOut","warn","submitEmailAuth","url","credentials","email","password","undefined","status","openProfile","_currentUser$name","_currentUser$picture","picture","saveProfile","xsrf","mounted","u","u2","term","filteredGroups","g","_t$name","favOk","favCount","size","handleChatInputChange","value","handleKeyDown","preventDefault","className","children","onClick","fileName","_jsxFileName","lineNumber","columnNumber","href","ref","src","alt","referrerPolicy","variant","AuthModal","ProfileModal","HomeView","FavoritesView","CategoriesView","active","action","item","IconComponent","placeholder","onChange","type","disabled","autoFocus","onKeyDown","checked","steps","onOpenTool","buildPrompt","ToolCard","isFav","onToggleFav","onError","img","currentTarget","onerror","style","display","rel","categories","id","label","emoji","description","count","gradient","filteredCategories","category","setTimeout","_","i","log","reduce","total","cat","_c","$RefreshReg$"],"sources":["C:/Users/komun/booking-app/frontend/src/App.tsx"],"sourcesContent":["import React, { useEffect, useRef, useState, useCallback } from 'react';\nimport { Search, Star, MessageCircle, Zap, Sparkles, History, X, ArrowLeft, Copy, Check, Grid3x3, Heart, User, Menu, Lightbulb, Wand2 } from 'lucide-react';\n\nimport { Button } from './components/ui/button';\nimport { Input } from './components/ui/input';\nimport { Badge } from './components/ui/badge';\nimport { Card, CardContent } from './components/ui/card';\n\nimport { openOAuthPopup, fetchMe, refreshSession, logout } from './auth';\nimport PlanMindMap from './components/ui/PlanMindMap';\nimport { useLanguage, useTranslations } from './LanguageContext';\nimport { Language } from './i18n';\n\n/* ---------- API base ---------- */\nconst API_BASE =\n  (import.meta as any).env?.VITE_API_BASE ||\n  (window as any).__API_BASE__ ||\n  'http://127.0.0.1:8000';\n\n/* ---------- Types matching backend ---------- */\ntype Tool = { name: string; link?: string | null; icon?: string | null };\ntype Group = { title: string; tools: Tool[] };\ntype PlanItem = { task: string; tools: Tool[] };\ntype PlanResponse = { goal: string; plan: PlanItem[]; groups?: Group[] };\n\ntype CurrentUser = {\n  id: number;\n  email: string;\n  name?: string | null;\n  picture?: string | null;\n} | null;\n\n/* ---------- Language and Localization ---------- */\n// type Language = 'en' | 'bg';\n\n\n\n// Language detection function\nfunction detectLanguage(text: string): Language {\n  if (!text || text.trim().length < 3) return 'en';\n  \n  // Bulgarian characters detection\n  const bulgarianChars = /[а-я]/gi;\n  const bulgarianMatches = text.match(bulgarianChars);\n  const bulgarianRatio = bulgarianMatches ? bulgarianMatches.length / text.length : 0;\n  \n  // If more than 20% of characters are Cyrillic, consider it Bulgarian\n  return bulgarianRatio > 0.2 ? 'bg' : 'en';\n}\n\n/* ---------- Favorites v2 (persist full tool) ---------- */\ntype FavTool = { name: string; icon?: string | null; link?: string | null };\nconst FAVS_V2_KEY = 'myai:favs_v2';\nconst FAVS_V1_KEY = 'myai:favs';\n\n/* ---------- Recent prompts ---------- */\nconst RECENT_KEY = 'myai:recent_prompts';\nconst RECENT_MAX = 6;\n\n/* ---------- Language preference ---------- */\nconst LANGUAGE_KEY = 'myai:language';\n\n/* ---------- Helpers ---------- */\nfunction groupsFromPlanFallback(plan: PlanItem[]): Group[] {\n  const byTitle = new Map<string, Map<string, Tool>>();\n  for (const p of plan) {\n    const title = p.task;\n    const bucket = byTitle.get(title) ?? new Map<string, Tool>();\n    for (const t of p.tools) bucket.set(t.name, t);\n    byTitle.set(title, bucket);\n  }\n  return Array.from(byTitle.entries()).map(([title, bucket]) => ({\n    title,\n    tools: Array.from(bucket.values()),\n  }));\n}\n\n// Enhanced suggested prompt builder with language support\n// Enhanced suggested prompt builder with language support and step-specific context\n// Direct actionable prompt builder that creates copy-paste ready prompts\nfunction buildStepPrompt(goal: string, stepTitle: string, tools: Tool[], language: Language) {\n  const isBg = language === 'bg';\n  \n  // Normalize goal and step for analysis\n  const stepLower = stepTitle.toLowerCase();\n  const goalLower = goal.toLowerCase();\n  \n  // Create placeholder for user's specific context\n  const goalPlaceholder = goal || (isBg ? '[вашата цел/продукт/услуга]' : '[your goal/product/service]');\n  \n  // Generate specific, actionable prompts based on step content\n  let actionablePrompt = '';\n  \n  // Research steps\n  if (stepLower.includes('изследв') || stepLower.includes('проуч') || stepLower.includes('research') || \n      stepLower.includes('анализ') || stepLower.includes('analyze') || stepLower.includes('аудитория')) {\n    \n    if (stepLower.includes('аудитория') || stepLower.includes('audience') || stepLower.includes('конкурент') || stepLower.includes('competitor')) {\n      actionablePrompt = isBg \n        ? `Направи подробно проучване на целевата аудитория за ${goalPlaceholder}, като включиш демографски данни, психографски характеристики, поведенчески модели и основни болки/желания. След това анализирай конкурентите (местни и международни), опиши техните силни и слаби страни, ценова политика, канали за комуникация и уникално предложение. Завърши с препоръки как моят бизнес може да се отличи.`\n        : `Conduct detailed research on the target audience for ${goalPlaceholder}, including demographic data, psychographic characteristics, behavioral patterns, and main pain points/desires. Then analyze competitors (local and international), describe their strengths and weaknesses, pricing policy, communication channels, and unique value proposition. End with recommendations on how my business can differentiate itself.`;\n    } else if (stepLower.includes('пазар') || stepLower.includes('market') || stepLower.includes('тенден') || stepLower.includes('trend')) {\n      actionablePrompt = isBg \n        ? `Анализирай пазарните тенденции и възможности за ${goalPlaceholder}. Проучи размера на пазара, темповете на растеж, ключовите играчи, регулаторните изисквания и технологичните промени. Идентифицирай нишови сегменти, неудовлетворени нужди и бъдещи възможности. Предостави конкретни данни, статистики и източници, и завърши с препоръки за пазарно позициониране.`\n        : `Analyze market trends and opportunities for ${goalPlaceholder}. Research market size, growth rates, key players, regulatory requirements, and technological changes. Identify niche segments, unmet needs, and future opportunities. Provide specific data, statistics, and sources, and conclude with market positioning recommendations.`;\n    } else {\n      actionablePrompt = isBg \n        ? `Проведи задълбочено изследване за ${goalPlaceholder}. Събери актуална информация от надеждни sources, анализирай най-добрите практики в индустрията, идентифицирай ключовите успешни фактори и потенциалните рискове. Създай структуриран доклад с основни находки, статистики и препоръки за следващи стъпки.`\n        : `Conduct in-depth research on ${goalPlaceholder}. Gather current information from reliable sources, analyze industry best practices, identify key success factors and potential risks. Create a structured report with key findings, statistics, and recommendations for next steps.`;\n    }\n  }\n  \n  // Creative/Design steps\n  else if (stepLower.includes('създа') || stepLower.includes('генерир') || stepLower.includes('create') || \n           stepLower.includes('дизайн') || stepLower.includes('design') || stepLower.includes('концепц') || stepLower.includes('concept')) {\n    \n    if (stepLower.includes('лого') || stepLower.includes('logo') || stepLower.includes('бранд') || stepLower.includes('brand')) {\n      actionablePrompt = isBg \n        ? `Създай концепция за лого и визуална идентичност за ${goalPlaceholder}. Опиши 3-5 различни дизайнерски посоки, включително цветова палитра, типография, стил и настроение. За всяка концепция обясни символиката, психологическото въздействие и как отразява стойностите на бранда. Добави препоръки за приложение на различни носители (уеб, печат, социални мрежи) и файлови формати за изпълнение.`\n        : `Create a logo and visual identity concept for ${goalPlaceholder}. Describe 3-5 different design directions, including color palette, typography, style, and mood. For each concept, explain the symbolism, psychological impact, and how it reflects the brand values. Add recommendations for application across different media (web, print, social media) and file formats for execution.`;\n    } else if (stepLower.includes('контент') || stepLower.includes('content') || stepLower.includes('материал') || stepLower.includes('кампан') || stepLower.includes('campaign')) {\n      actionablePrompt = isBg \n        ? `Създай набор от маркетингови материали за ${goalPlaceholder}, включително: слоган, ключови послания, текстове за социални мрежи, имейл кампании и кратко видео-сценарий. Материалите трябва да са съобразени с целевата аудитория, да подчертават уникалното предложение и да предизвикват емоция и ангажираност. Дай ми и предложение за рекламни кампании с конкретни канали (Facebook, Instagram, Google Ads, TikTok и др.), бюджети и очаквани резултати.`\n        : `Create a set of marketing materials for ${goalPlaceholder}, including: slogan, key messages, social media copy, email campaigns, and a short video script. Materials should be tailored to the target audience, highlight the unique value proposition, and evoke emotion and engagement. Also provide advertising campaign suggestions with specific channels (Facebook, Instagram, Google Ads, TikTok, etc.), budgets, and expected results.`;\n    } else {\n      actionablePrompt = isBg \n        ? `Разработи креативна концепция за ${goalPlaceholder}. Създай 3 различни варианта с подробно описание на визуалните елементи, цветова схема, стил и настроение. За всеки вариант обясни целевата аудитория, ключовите съобщения и очакваното въздействие. Включи конкретни препоръки за изпълнение, необходими ресурси и време за реализация.`\n        : `Develop a creative concept for ${goalPlaceholder}. Create 3 different variants with detailed description of visual elements, color scheme, style, and mood. For each variant, explain the target audience, key messages, and expected impact. Include specific implementation recommendations, required resources, and timeline for execution.`;\n    }\n  }\n  \n  // Strategy/Planning steps\n  else if (stepLower.includes('план') || stepLower.includes('стратег') || stepLower.includes('plan') || \n           stepLower.includes('strategy') || stepLower.includes('органи') || stepLower.includes('organize')) {\n    \n    actionablePrompt = isBg \n      ? `Създай детайлен стратегически план за ${goalPlaceholder}. Включи: конкретни цели с времеви рамки, необходими ресурси и бюджет, ключови дейности и милестъни, отговорни лица/роли, потенциални рискове и мерки за тяхното минимизиране. Добави KPI метрики за измерване на прогреса и план за редовно ревю и актуализация на стратегията.`\n      : `Create a detailed strategic plan for ${goalPlaceholder}. Include: specific goals with timelines, required resources and budget, key activities and milestones, responsible persons/roles, potential risks and mitigation measures. Add KPI metrics for measuring progress and a plan for regular review and strategy updates.`;\n  }\n  \n  // Implementation/Execution steps\n  else if (stepLower.includes('изпълн') || stepLower.includes('реализ') || stepLower.includes('implement') || \n           stepLower.includes('execute') || stepLower.includes('build') || stepLower.includes('develop')) {\n    \n    actionablePrompt = isBg \n      ? `Създай подробен план за изпълнение на ${goalPlaceholder}. Разбий процеса на конкретни задачи със срокове, дефинирай необходимите ресурси и инструменти, създай времева линия с критични моменти. Включи контролни точки за качество, възможни препятствия и алтернативни решения. Добави препоръки за екип, бюджет и методи за проследяване на напредъка.`\n      : `Create a detailed execution plan for ${goalPlaceholder}. Break down the process into specific tasks with deadlines, define required resources and tools, create a timeline with critical moments. Include quality checkpoints, possible obstacles, and alternative solutions. Add recommendations for team, budget, and progress tracking methods.`;\n  }\n  \n  // Testing/Validation steps\n  else if (stepLower.includes('тест') || stepLower.includes('провер') || stepLower.includes('test') || \n           stepLower.includes('validate') || stepLower.includes('оценк') || stepLower.includes('evaluate')) {\n    \n    actionablePrompt = isBg \n      ? `Създай план за тестване и валидация на ${goalPlaceholder}. Дефинирай конкретни критерии за успех, методи за тестване (A/B тестове, потребителски интервюта, пилотни програми), необходими инструменти и метрики. Опиши как да събираш и анализираш обратната връзка, как да итерираш базирано на резултатите и какви корекции да правиш преди финалното пускане.`\n      : `Create a testing and validation plan for ${goalPlaceholder}. Define specific success criteria, testing methods (A/B tests, user interviews, pilot programs), required tools and metrics. Describe how to collect and analyze feedback, how to iterate based on results, and what corrections to make before final launch.`;\n  }\n  \n  // Launch/Finalization steps\n  else if (stepLower.includes('пуска') || stepLower.includes('лансир') || stepLower.includes('launch') || \n           stepLower.includes('финализир') || stepLower.includes('завърш') || stepLower.includes('complete') ||\n           stepLower.includes('публик') || stepLower.includes('publish')) {\n    \n    actionablePrompt = isBg \n      ? `Направи план за лансиране на ${goalPlaceholder}, включително времева линия, стъпки по подготовка, съдържателен календар за социалните мрежи, PR стратегия и възможни партньорства/инфлуенсъри. Опиши как да синхронизирам онлайн и офлайн дейностите, как да изградя очакване преди лансирането и как да постигна максимална видимост в първите 30 дни.`\n      : `Create a launch plan for ${goalPlaceholder}, including timeline, preparation steps, social media content calendar, PR strategy, and potential partnerships/influencers. Describe how to synchronize online and offline activities, how to build anticipation before launch, and how to achieve maximum visibility in the first 30 days.`;\n  }\n  \n  // Monitoring/Optimization steps\n  else if (stepLower.includes('мониторинг') || stepLower.includes('следен') || stepLower.includes('monitor') || \n           stepLower.includes('анализ') || stepLower.includes('подобр') || stepLower.includes('optimize') ||\n           stepLower.includes('резултат') || stepLower.includes('result')) {\n    \n    actionablePrompt = isBg \n      ? `Предложи система за мониторинг на резултатите от ${goalPlaceholder}. Опиши кои KPI да следя (трафик, конверсии, CAC, ROI, ангажираност, отзиви), какви инструменти да използвам (Google Analytics, Meta Ads Manager, CRM и др.), как да анализирам данните и какви стъпки за оптимизация мога да предприема. Добави и конкретни идеи за A/B тестове, за да подобря ефективността.`\n      : `Suggest a system for monitoring results from ${goalPlaceholder}. Describe which KPIs to track (traffic, conversions, CAC, ROI, engagement, reviews), what tools to use (Google Analytics, Meta Ads Manager, CRM, etc.), how to analyze data, and what optimization steps I can take. Also add specific A/B test ideas to improve effectiveness.`;\n  }\n  \n  // Generic fallback\n  else {\n    actionablePrompt = isBg \n      ? `Създай детайлен plan за \"${stepTitle}\" в контекста на ${goalPlaceholder}. Включи конкретни стъпки за изпълнение, необходими ресурси и инструменти, времеви рамки, потенциални предизвикателства и как да ги преодолеем. Добави измерими цели, критерии за успех и план за проследяване на прогреса.`\n      : `Create a detailed plan for \"${stepTitle}\" in the context of ${goalPlaceholder}. Include specific execution steps, required resources and tools, timelines, potential challenges and how to overcome them. Add measurable goals, success criteria, and a progress tracking plan.`;\n  }\n  \n  // Add tool-specific guidance if tools are available\n  if (tools.length > 0) {\n    const toolNames = tools.map(t => t.name).join(', ');\n    const toolGuidance = isBg \n      ? `\\n\\nПри работата използвай следните инструменти: ${toolNames}. За всеки инструмент обясни как точно да го използвам за тази задача, какви функции са най-полезни и как да постигна най-добри резултати.`\n      : `\\n\\nUse these tools in your work: ${toolNames}. For each tool, explain exactly how to use it for this task, which features are most useful, and how to achieve the best results.`;\n    actionablePrompt += toolGuidance;\n  }\n  \n  return actionablePrompt;\n}\n\n// read a cookie by name (for XSRF)\nfunction getCookie(name: string) {\n  const parts = document.cookie ? document.cookie.split('; ') : [];\n  for (const part of parts) {\n    const eq = part.indexOf('=');\n    const key = decodeURIComponent(eq > -1 ? part.slice(0, eq) : part);\n    if (key === name) {\n      const val = eq > -1 ? part.slice(eq + 1) : '';\n      return decodeURIComponent(val);\n    }\n  }\n  return null;\n}\n\n/* ---------- Simple hash router ---------- */\ntype View = 'home' | 'favorites' | 'categories';\nfunction getViewFromHash(): View {\n  if (window.location.hash === '#/favorites') return 'favorites';\n  if (window.location.hash === '#/categories') return 'categories';\n  return 'home';\n}\nfunction goHome() {\n  if (window.location.hash !== '' && window.location.hash !== '#/') {\n    window.location.hash = '#/';\n  } else {\n    window.scrollTo({ top: 0, behavior: 'smooth' });\n  }\n}\nfunction goFavorites() {\n  if (window.location.hash !== '#/favorites') window.location.hash = '#/favorites';\n}\nfunction goCategories() {\n  if (window.location.hash !== '#/categories') window.location.hash = '#/categories';\n}\n\nexport default function App() {\n  const [view, setView] = useState<View>(getViewFromHash());\n  const [activeTab, setActiveTab] = useState('Home');\n  const { language, setLanguage } = useLanguage();\n\n\n  const [searchQuery, setSearchQuery] = useState('');\n  const [chatInput, setChatInput] = useState('');\n  const [groups, setGroups] = useState<Group[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [currentUser, setCurrentUser] = useState<CurrentUser>(null);\n\n  // >>> store last goal for visual plan + prompts\n  const [lastGoal, setLastGoal] = useState<string>('');\n\n  // dropdowns\n  const [signinOpen, setSigninOpen] = useState(false);\n  const signinRef = useRef<HTMLDivElement>(null);\n  const [profileOpen, setProfileOpen] = useState(false);\n  const profileRef = useRef<HTMLDivElement>(null);\n  const [mobileMenuOpen, setMobileMenuOpen] = useState(false);\n\n  // Email modal\n  const [showEmailModal, setShowEmailModal] = useState(false);\n  const [authMode, setAuthMode] = useState<'signup' | 'signin'>('signup');\n  const [authEmail, setAuthEmail] = useState('');\n  const [authPassword, setAuthPassword] = useState('');\n  const [authName, setAuthName] = useState('');\n  const [authSubmitting, setAuthSubmitting] = useState(false);\n  const [authError, setAuthError] = useState<string | null>(null);\n\n  // Profile modal\n  const [showProfileModal, setShowProfileModal] = useState(false);\n  const [profName, setProfName] = useState('');\n  const [profPic, setProfPic] = useState('');\n  const [profSaving, setProfSaving] = useState(false);\n\n  // Favorites v2 (map by name)\n  const [favs, setFavs] = useState<Map<string, FavTool>>(new Map());\n  const [showFavsOnly, setShowFavsOnly] = useState(false);\n\n  // Recent prompts\n  const [recents, setRecents] = useState<string[]>([]);\n\n  // Get translation function (memoized to prevent re-renders)\n  const translationsCtx = useTranslations();\n  const t = (key: keyof typeof translationsCtx) => translationsCtx[key];\n\n\n  // Memoize the onOpenTool callback to prevent re-renders\n  const handleOpenTool = useCallback((tool: Tool) => {\n    if (tool.link) {\n      window.open(tool.link, '_blank', 'noreferrer,noopener');\n    }\n  }, []);\n\n  // Memoize the buildPrompt callback to prevent re-renders\n  const buildPromptCallback = useCallback(({ goal, stepTitle, tools }: { goal: string; stepTitle: string; tools: Tool[] }) => \n    buildStepPrompt(goal, stepTitle, tools, language)\n  , [language]);\n\n  // ---- hash router listener ----\n  useEffect(() => {\n    const onHash = () => setView(getViewFromHash());\n    window.addEventListener('hashchange', onHash);\n    return () => window.removeEventListener('hashchange', onHash);\n  }, []);\n\n  // Load saved language preference\n  useEffect(() => {\n    try {\n      const savedLang = localStorage.getItem(LANGUAGE_KEY) as Language;\n      if (savedLang && (savedLang === 'en' || savedLang === 'bg')) {\n        setLanguage(savedLang);\n      }\n    } catch {}\n  }, []);\n\n  // Language saver without timeout to prevent race conditions\n  const saveLanguage = useCallback((lang: Language) => {\n  if (language !== lang) {\n    setLanguage(lang);\n    try { localStorage.setItem(LANGUAGE_KEY, lang); } catch {}\n  }\n}, [language, setLanguage]);\n\n\n  // click outside for dropdowns\n  useEffect(() => {\n    const onDocClick = (e: MouseEvent) => {\n      if (signinRef.current && !signinRef.current.contains(e.target as Node)) setSigninOpen(false);\n      if (profileRef.current && !profileRef.current.contains(e.target as Node)) setProfileOpen(false);\n    };\n    document.addEventListener('click', onDocClick, true);\n    return () => document.removeEventListener('click', onDocClick, true);\n  }, []);\n\n  // load favorites\n  useEffect(() => {\n    try {\n      const v2raw = localStorage.getItem(FAVS_V2_KEY);\n      if (v2raw) {\n        const arr: FavTool[] = JSON.parse(v2raw) || [];\n        setFavs(new Map(arr.map((t) => [t.name, t])));\n      } else {\n        const v1raw = localStorage.getItem(FAVS_V1_KEY);\n        if (v1raw) {\n          const names: string[] = JSON.parse(v1raw) || [];\n          const arr: FavTool[] = names.map((name) => ({ name }));\n          localStorage.setItem(FAVS_V2_KEY, JSON.stringify(arr));\n          localStorage.removeItem(FAVS_V1_KEY);\n          setFavs(new Map(arr.map((t) => [t.name, t])));\n        }\n      }\n    } catch {}\n  }, []);\n\n  function saveFavs(next: Map<string, FavTool>) {\n    setFavs(new Map(next));\n    try {\n      localStorage.setItem(FAVS_V2_KEY, JSON.stringify(Array.from(next.values())));\n    } catch {}\n  }\n\n  function toggleFav(tool: Tool | FavTool) {\n    const next = new Map(favs);\n    if (next.has(tool.name)) next.delete(tool.name);\n    else next.set(tool.name, { name: tool.name, icon: (tool as any).icon, link: (tool as any).link });\n    saveFavs(next);\n  }\n\n  // load recents\n  useEffect(() => {\n    try {\n      const raw = localStorage.getItem(RECENT_KEY);\n      if (raw) setRecents(JSON.parse(raw));\n    } catch {}\n  }, []);\n\n  function pushRecent(prompt: string) {\n    const p = prompt.trim();\n    if (!p) return;\n    const next = [p, ...recents.filter((r) => r !== p)].slice(0, RECENT_MAX);\n    setRecents(next);\n    try {\n      localStorage.setItem(RECENT_KEY, JSON.stringify(next));\n    } catch {}\n  }\n\n  function removeRecent(prompt: string) {\n    const next = recents.filter((r) => r !== prompt);\n    setRecents(next);\n    try {\n      localStorage.setItem(RECENT_KEY, JSON.stringify(next));\n    } catch {}\n  }\n\n  function clearRecents() {\n    setRecents([]);\n    try {\n      localStorage.removeItem(RECENT_KEY);\n    } catch {}\n  }\n\n  // Fixed fetchPlan function with cache busting\n  async function fetchPlan(prompt: string): Promise<PlanResponse> {\n    const timestamp = Date.now();\n    const res = await fetch(`${API_BASE}/plan?t=${timestamp}`, {\n      method: 'POST',\n      headers: { \n        'Content-Type': 'application/json',\n        'Cache-Control': 'no-cache, no-store, must-revalidate',\n        'Pragma': 'no-cache',\n        'Expires': '0'\n      },\n      body: JSON.stringify({ user_goal: prompt }),\n    });\n    if (!res.ok) throw new Error('Failed to fetch tools from backend');\n    return res.json();\n  }\n\n  // Fixed handleFindTools function\n  const handleFindTools = useCallback(async (fromPrompt?: string) => {\n    const prompt = (fromPrompt ?? chatInput).trim();\n    if (!prompt) return;\n    \n    // Clear previous results immediately\n    setGroups([]);\n    setLastGoal('');\n    setLoading(true);\n    setError(null);\n    \n    try {\n      // Detect language and save immediately (no timeout)\n      const detectedLang = detectLanguage(prompt);\n      saveLanguage(detectedLang);\n      \n      const data = await fetchPlan(prompt);\n      const grouped = data.groups && data.groups.length ? data.groups : groupsFromPlanFallback(data.plan);\n      \n      setGroups(grouped);\n      setLastGoal(data.goal || prompt);\n      pushRecent(prompt);\n      \n      // Clear input after successful search\n      if (!fromPrompt) {\n        setChatInput('');\n      }\n    } catch (e) {\n      console.error('Error fetching plan:', e);\n      setError(language === 'bg' ? '⚠️ Възникна грешка при зареждането на инструментите.' : '⚠️ Something went wrong while fetching tools.');\n    } finally {\n      setLoading(false);\n    }\n  }, [chatInput, saveLanguage, language]);\n\n  // ------- Auth (cookie session) -------\n  async function handleGoogleSignIn() {\n    try {\n      const { user } = await openOAuthPopup('google');\n      setCurrentUser(user);\n      setError(null);\n    } catch (e) {\n      console.error(e);\n      setError(t('signInFailed'));\n    }\n  }\n\n  async function handleSignOut() {\n    try {\n      await logout();\n    } catch (e) {\n      console.warn('Logout error:', e);\n    }\n    setCurrentUser(null);\n  }\n\n  async function submitEmailAuth() {\n    setAuthSubmitting(true);\n    setAuthError(null);\n    setError(null);\n    try {\n      const url = authMode === 'signup' ? `${API_BASE}/auth/register` : `${API_BASE}/auth/login`;\n      const res = await fetch(url, {\n        method: 'POST',\n        credentials: 'include',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          email: authEmail,\n          password: authPassword,\n          name: authMode === 'signup' ? authName : undefined,\n        }),\n      });\n\n      if (!res.ok) {\n        const t = await res.text();\n        throw new Error(t || `HTTP ${res.status}`);\n      }\n\n      const data = await res.json();\n      setCurrentUser(data.user);\n      setShowEmailModal(false);\n      setAuthEmail('');\n      setAuthPassword('');\n      setAuthName('');\n    } catch (e: any) {\n      console.error(e);\n      setAuthError(authMode === 'signup' ? t('signUpFailed') : t('signInFailed'));\n    } finally {\n      setAuthSubmitting(false);\n    }\n  }\n\n  // Profile modal open\n  function openProfile() {\n    if (!currentUser) return;\n    setProfName(currentUser.name ?? '');\n    setProfPic(currentUser.picture ?? '');\n    setShowProfileModal(true);\n    setProfileOpen(false);\n  }\n\n  // Save profile (PATCH /auth/me)\n  async function saveProfile() {\n    if (!currentUser) return;\n    setProfSaving(true);\n    setError(null);\n    try {\n      const xsrf = getCookie('XSRF-TOKEN');\n      const res = await fetch(`${API_BASE}/auth/me`, {\n        method: 'PATCH',\n        credentials: 'include',\n        headers: {\n          'Content-Type': 'application/json',\n          ...(xsrf ? { 'X-XSRF-TOKEN': xsrf } : {}),\n        },\n        body: JSON.stringify({ name: profName, picture: profPic }),\n      });\n      if (!res.ok) {\n        const t = await res.text();\n        throw new Error(t || 'Update failed');\n      }\n      const user = await res.json();\n      setCurrentUser(user);\n      setShowProfileModal(false);\n    } catch (e) {\n      console.error(e);\n      setError(t('profileUpdateFailed'));\n    } finally {\n      setProfSaving(false);\n    }\n  }\n\n  // auto-load session\n  useEffect(() => {\n    let mounted = true;\n    (async () => {\n      try {\n        const u = await fetchMe();\n        if (mounted) setCurrentUser(u);\n      } catch {\n        try {\n          await refreshSession();\n          const u2 = await fetchMe();\n          if (mounted) setCurrentUser(u2);\n        } catch {\n          if (mounted) setCurrentUser(null);\n        }\n      }\n    })();\n    return () => { mounted = false; };\n  }, []);\n\n  // Filtering logic\n  const term = searchQuery.trim().toLowerCase();\n  const filteredGroups: Group[] = groups\n    .map((g) => ({\n      title: g.title,\n      tools: g.tools.filter((t) => {\n        const match = !term || g.title.toLowerCase().includes(term) || (t.name ?? '').toLowerCase().includes(term);\n        const favOk = !showFavsOnly || favs.has(t.name);\n        return match && favOk;\n      }),\n    }))\n    .filter((g) => g.tools.length > 0);\n\n  const favCount = favs.size;\n\n  // Stable input change handler to prevent focus loss\n  const handleChatInputChange = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n    setChatInput(e.target.value);\n  }, []);\n\n  const handleKeyDown = useCallback((e: React.KeyboardEvent<HTMLInputElement>) => {\n    if (e.key === 'Enter') {\n      e.preventDefault();\n      handleFindTools();\n    }\n  }, [handleFindTools]);\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50\">\n      {/* Header */}\n      <header className=\"sticky top-0 z-50 bg-white/80 backdrop-blur-xl border-b border-slate-200/50\">\n        <div className=\"max-w-6xl mx-auto px-4 py-3\">\n          <div className=\"flex items-center justify-between\">\n            {/* Logo */}\n            <div className=\"flex items-center gap-3 cursor-pointer\" onClick={goHome}>\n              <div className=\"w-9 h-9 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl flex items-center justify-center shadow-lg shadow-blue-500/25\">\n                <Sparkles className=\"w-5 h-5 text-white\" />\n              </div>\n              <span className=\"text-xl text-slate-800 font-semibold\">My AI</span>\n            </div>\n\n            {/* Desktop Navigation */}\n            <nav className=\"hidden md:flex items-center gap-8\">\n              <button \n                onClick={goHome} \n                className={`font-medium transition-colors ${view === 'home' ? 'text-blue-600' : 'text-slate-600 hover:text-blue-600'}`}\n              >\n                {t('discover')}\n              </button>\n              <button \n                onClick={goCategories} \n                className={`font-medium transition-colors ${view === 'categories' ? 'text-blue-600' : 'text-slate-600 hover:text-blue-600'}`}\n              >\n                {t('categories')}\n              </button>\n              <a href=\"#\" className=\"text-slate-600 hover:text-blue-600 font-medium transition-colors\">{t('learn')}</a>\n\n              {/* Favorites */}\n              <button\n                onClick={goFavorites}\n                className={`inline-flex items-center gap-2 font-medium transition-colors ${\n                  view === 'favorites' ? 'text-blue-600' : 'text-slate-700 hover:text-blue-600'\n                }`}\n                title={t('favorites')}\n              >\n                <Star className={`w-4 h-4 ${favCount ? 'fill-yellow-400 text-yellow-500' : ''}`} />\n                <span className=\"hidden lg:inline\">{t('favorites')}</span>\n                <span className=\"text-xs bg-slate-100 text-slate-600 px-2 py-1 rounded-full\">{favCount}</span>\n              </button>\n\n              {/* Auth section */}\n              {currentUser ? (\n                <div className=\"relative\" ref={profileRef}>\n                  <button \n                    onClick={() => setProfileOpen(!profileOpen)} \n                    className=\"flex items-center gap-2 hover:bg-slate-50 p-2 rounded-xl transition-colors\" \n                    title={currentUser.email}\n                  >\n                    {currentUser.picture ? (\n                      <img \n                        src={currentUser.picture} \n                        alt=\"avatar\" \n                        className=\"w-8 h-8 rounded-full border border-slate-200\" \n                        referrerPolicy=\"no-referrer\" \n                      />\n                    ) : (\n                      <div className=\"w-8 h-8 rounded-full bg-blue-200\" />\n                    )}\n                    <span className=\"text-slate-700 font-medium max-w-[120px] truncate hidden lg:block\">\n                      {currentUser.name || currentUser.email}\n                    </span>\n                  </button>\n                  {profileOpen && (\n                    <div className=\"absolute right-0 mt-2 w-56 bg-white rounded-2xl shadow-xl border border-slate-200/60 p-1 z-50\">\n                      <button onClick={openProfile} className=\"w-full text-left px-3 py-2 rounded-xl hover:bg-slate-50 transition-colors\">\n                        {t('profile')}\n                      </button>\n                      <div className=\"my-1 border-t border-slate-100\" />\n                      <button onClick={handleSignOut} className=\"w-full text-left px-3 py-2 rounded-xl hover:bg-slate-50 transition-colors text-red-600\">\n                        {t('signOut')}\n                      </button>\n                    </div>\n                  )}\n                </div>\n              ) : (\n                <div className=\"relative\" ref={signinRef}>\n                  <Button \n                    variant=\"outline\" \n                    size=\"sm\" \n                    onClick={() => setSigninOpen(!signinOpen)} \n                    className=\"border-blue-300 text-blue-600 hover:bg-blue-50 font-medium\"\n                  >\n                    {t('signIn')}\n                  </Button>\n                  {signinOpen && (\n                    <div className=\"absolute right-0 mt-2 w-64 bg-white rounded-2xl shadow-2xl border border-slate-200/60 p-1 z-50\">\n                      <button\n                        onClick={() => { setSigninOpen(false); setAuthMode('signup'); setShowEmailModal(true); }}\n                        className=\"w-full flex items-center px-3 py-2 rounded-xl hover:bg-slate-50 transition-colors\"\n                      >\n                        <div className=\"w-6 h-6 rounded-md bg-slate-200 mr-3\" />\n                        <div className=\"flex flex-col items-start\">\n                          <span className=\"text-slate-800 font-medium\">{t('createAccount')}</span>\n                          <span className=\"text-slate-400 text-xs\">{t('emailPassword')}</span>\n                        </div>\n                      </button>\n                      <div className=\"my-1 border-t border-slate-100\" />\n                      <button\n                        onClick={() => { setSigninOpen(false); handleGoogleSignIn(); }}\n                        className=\"w-full flex items-center px-3 py-2 rounded-xl hover:bg-slate-50 transition-colors\"\n                      >\n                        <img src=\"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg\" alt=\"Google\" className=\"w-4 h-4 mr-3\" />\n                        <span className=\"text-slate-800 font-medium\">{t('signInWithGoogle')}</span>\n                      </button>\n                    </div>\n                  )}\n                </div>\n              )}\n            </nav>\n\n            {/* Mobile menu button */}\n            <Button\n              variant=\"outline\"\n              size=\"sm\"\n              className=\"md:hidden\"\n              onClick={() => setMobileMenuOpen(!mobileMenuOpen)}\n            >\n              <Menu className=\"w-4 h-4\" />\n            </Button>\n          </div>\n\n          {/* Mobile menu */}\n          {mobileMenuOpen && (\n            <div className=\"md:hidden mt-4 pb-4 border-t border-slate-200/50 pt-4\">\n              <div className=\"space-y-2\">\n                <button onClick={() => { goHome(); setMobileMenuOpen(false); }} className=\"block w-full text-left px-3 py-2 rounded-xl hover:bg-slate-50 transition-colors font-medium\">\n                  {t('discover')}\n                </button>\n                <button onClick={() => { goCategories(); setMobileMenuOpen(false); }} className=\"block w-full text-left px-3 py-2 rounded-xl hover:bg-slate-50 transition-colors font-medium\">\n                  {t('categories')}\n                </button>\n                <button onClick={() => { goFavorites(); setMobileMenuOpen(false); }} className=\"block w-full text-left px-3 py-2 rounded-xl hover:bg-slate-50 transition-colors font-medium\">\n                  {t('favorites')} ({favCount})\n                </button>\n                {!currentUser && (\n                  <button onClick={() => { setShowEmailModal(true); setMobileMenuOpen(false); }} className=\"block w-full text-left px-3 py-2 rounded-xl hover:bg-slate-50 transition-colors font-medium text-blue-600\">\n                    {t('signIn')}\n                  </button>\n                )}\n              </div>\n            </div>\n          )}\n        </div>\n      </header>\n\n      {/* Modals */}\n      {showEmailModal && <AuthModal />}\n      {showProfileModal && currentUser && <ProfileModal />}\n\n      {/* Main Content */}\n      {view === 'home' ? <HomeView /> : view === 'favorites' ? <FavoritesView /> : <CategoriesView />}\n\n      {/* Bottom Navigation (Mobile) */}\n      <nav className=\"fixed bottom-0 left-0 right-0 bg-white/80 backdrop-blur-xl border-t border-slate-200/50 md:hidden z-50\">\n        <div className=\"flex items-center justify-around py-2\">\n          {[\n            { name: t('home'), icon: Grid3x3, active: activeTab === 'Home', action: () => { goHome(); setActiveTab('Home'); } },\n            { name: t('categories'), icon: MessageCircle, active: activeTab === 'Categories', action: () => { goCategories(); setActiveTab('Categories'); } },\n            { name: t('favorites'), icon: Heart, active: activeTab === 'Favorites', action: () => { goFavorites(); setActiveTab('Favorites'); } },\n            { name: t('profile'), icon: User, active: activeTab === 'Profile', action: () => setActiveTab('Profile') }\n          ].map((item) => {\n            const IconComponent = item.icon;\n            return (\n              <button\n                key={item.name}\n                onClick={item.action}\n                className={`flex flex-col items-center py-2 px-3 rounded-xl transition-colors ${\n                  item.active ? 'text-blue-600 bg-blue-50' : 'text-slate-400 hover:text-slate-600'\n                }`}\n              >\n                <IconComponent className=\"w-5 h-5 mb-1\" />\n                <span className=\"text-xs font-medium\">{item.name}</span>\n              </button>\n            );\n          })}\n        </div>\n      </nav>\n    </div>\n  );\n\n  // Auth Modal Component\n  function AuthModal() {\n    return (\n      <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/30 backdrop-blur-sm\">\n        <div className=\"bg-white w-full max-w-md rounded-2xl shadow-2xl p-6 mx-4\">\n          <div className=\"flex items-center justify-between mb-6\">\n            <h3 className=\"text-xl font-semibold text-slate-800\">\n              {authMode === 'signup' ? t('createYourAccount') : t('signInToAccount')}\n            </h3>\n            <button onClick={() => setShowEmailModal(false)} className=\"text-slate-500 hover:text-slate-700 p-1\">\n              <X className=\"w-5 h-5\" />\n            </button>\n          </div>\n\n          <div className=\"space-y-4\">\n            {authMode === 'signup' && (\n              <Input \n                placeholder={t('yourName')} \n                value={authName} \n                onChange={(e) => setAuthName(e.target.value)}\n                className=\"h-12 rounded-xl\"\n              />\n            )}\n            <Input \n              placeholder={t('email')} \n              type=\"email\" \n              value={authEmail} \n              onChange={(e) => setAuthEmail(e.target.value)}\n              className=\"h-12 rounded-xl\"\n            />\n            <Input \n              placeholder={t('password')} \n              type=\"password\" \n              value={authPassword} \n              onChange={(e) => setAuthPassword(e.target.value)}\n              className=\"h-12 rounded-xl\"\n            />\n            {authError && <div className=\"text-red-600 text-sm p-3 bg-red-50 rounded-xl\">{authError}</div>}\n          </div>\n\n          <div className=\"flex items-center justify-between mt-6\">\n            <button \n              onClick={() => setAuthMode(authMode === 'signup' ? 'signin' : 'signup')} \n              className=\"text-sm text-blue-600 hover:underline\"\n            >\n              {authMode === 'signup' ? t('alreadyHaveAccount') : t('dontHaveAccount')}\n            </button>\n            <div className=\"flex gap-3\">\n              <Button variant=\"outline\" onClick={() => setShowEmailModal(false)}>{t('cancel')}</Button>\n              <Button onClick={submitEmailAuth} disabled={authSubmitting} className=\"bg-gradient-to-r from-blue-600 to-indigo-600\">\n                {authMode === 'signup' ? t('createAccount') : t('signIn')}\n              </Button>\n            </div>\n          </div>\n\n          <div className=\"mt-6\">\n            <div className=\"text-center text-xs text-slate-400 mb-3\">{t('orContinueWith')}</div>\n            <Button \n              onClick={() => { setShowEmailModal(false); handleGoogleSignIn(); }} \n              className=\"w-full bg-white border border-slate-200 text-slate-800 hover:bg-slate-50 h-12\"\n            >\n              <img src=\"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg\" alt=\"Google\" className=\"w-5 h-5 mr-2\" />\n              {t('google')}\n            </Button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  // Profile Modal Component\n  function ProfileModal() {\n    return (\n      <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/30 backdrop-blur-sm\">\n        <div className=\"bg-white w-full max-w-md rounded-2xl shadow-2xl p-6 mx-4\">\n          <div className=\"flex items-center justify-between mb-6\">\n            <h3 className=\"text-xl font-semibold text-slate-800\">{t('yourProfile')}</h3>\n            <button onClick={() => setShowProfileModal(false)} className=\"text-slate-500 hover:text-slate-700 p-1\">\n              <X className=\"w-5 h-5\" />\n            </button>\n          </div>\n\n          <div className=\"flex items-center gap-4 mb-6\">\n            <div className=\"w-16 h-16 rounded-full overflow-hidden bg-slate-100 border-2 border-slate-200\">\n              {profPic ? (\n                <img src={profPic} className=\"w-full h-full object-cover\" referrerPolicy=\"no-referrer\" />\n              ) : (\n                <div className=\"w-full h-full bg-blue-200\" />\n              )}\n            </div>\n            <div className=\"flex-1\">\n              <div className=\"text-xs text-slate-500 mb-1\">{t('email')}</div>\n              <div className=\"text-slate-800 font-medium\">{currentUser!.email}</div>\n            </div>\n          </div>\n\n          <div className=\"space-y-4\">\n            <div>\n              <label className=\"text-sm font-medium text-slate-700 mb-2 block\">{t('name')}</label>\n              <Input \n                placeholder={t('name')} \n                value={profName} \n                onChange={(e) => setProfName(e.target.value)}\n                className=\"h-12 rounded-xl\"\n              />\n            </div>\n            <div>\n              <label className=\"text-sm font-medium text-slate-700 mb-2 block\">{t('avatarUrl')}</label>\n              <Input \n                placeholder=\"https://...\" \n                value={profPic} \n                onChange={(e) => setProfPic(e.target.value)}\n                className=\"h-12 rounded-xl\"\n              />\n            </div>\n          </div>\n\n          <div className=\"flex justify-end gap-3 mt-8\">\n            <Button variant=\"outline\" onClick={() => setShowProfileModal(false)}>{t('cancel')}</Button>\n            <Button onClick={saveProfile} disabled={profSaving} className=\"bg-gradient-to-r from-blue-600 to-indigo-600\">\n              {t('saveChanges')}\n            </Button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  // Home View Component with BOTH PlanMindMap AND Results sections\n  function HomeView() {\n    return (\n      <main className=\"max-w-6xl mx-auto px-4 py-8 pb-24 md:pb-12\">\n        {/* Hero Section */}\n        <section className=\"text-center mb-16\">\n          <h1 className=\"text-4xl md:text-5xl text-slate-800 mb-6 font-bold tracking-tight\">\n            {t('heroTitle')} <span className=\"bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent\">{t('heroTitleHighlight')}</span>\n          </h1>\n          <p className=\"text-xl text-slate-600 mb-10 max-w-2xl mx-auto leading-relaxed\">\n            {t('heroSubtitle')}\n          </p>\n\n          {/* Main Chat Input */}\n          <div className=\"max-w-2xl mx-auto mb-8\">\n            <div className=\"relative bg-white/80 backdrop-blur-sm rounded-3xl p-6 border border-slate-200/50 shadow-2xl shadow-blue-500/10\">\n              <div className=\"flex items-center gap-4 mb-4\">\n                <div className=\"w-12 h-12 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-2xl flex items-center justify-center shadow-lg shadow-blue-500/25\">\n                  <MessageCircle className=\"w-6 h-6 text-white\" />\n                </div>\n                <span className=\"text-slate-700 text-lg font-medium\">{t('inputPlaceholder')}</span>\n              </div>\n              <div className=\"flex gap-3\">\n                <Input\n                  placeholder={language === 'bg' ? 'напр., Писане на по-добри имейли, създаване на лого, анализ на данни...' : 'e.g., Write better emails, create a logo, analyze data...'}\n                  autoFocus\n                  value={chatInput}\n                  onChange={handleChatInputChange}\n                  onKeyDown={handleKeyDown}\n                  className=\"flex-1 bg-slate-50/80 border-slate-200 text-base h-14 rounded-2xl px-5 font-medium placeholder:text-slate-400\"\n                />\n                <Button \n                  onClick={() => handleFindTools()} \n                  className=\"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 px-6 h-14 rounded-2xl shadow-lg shadow-blue-500/25 font-medium\"\n                  disabled={loading}\n                >\n                  <Zap className=\"w-5 h-5 mr-2\" /> {t('findTools')}\n                </Button>\n              </div>\n            </div>\n          </div>\n\n          {/* Recent Prompts */}\n          {recents.length > 0 && (\n            <div className=\"max-w-2xl mx-auto mb-10\">\n              <div className=\"flex items-center justify-between mb-3 px-1\">\n                <div className=\"flex items-center gap-2 text-slate-600\">\n                  <History className=\"w-4 h-4\" />\n                  <span className=\"text-sm font-medium\">{t('recentPrompts')}</span>\n                </div>\n                <button className=\"text-xs text-slate-400 hover:text-slate-600 transition-colors\" onClick={clearRecents}>\n                  {t('clearAll')}\n                </button>\n              </div>\n              <div className=\"flex flex-wrap gap-2\">\n                {recents.map((prompt) => (\n                  <div key={prompt} className=\"group inline-flex items-center max-w-full bg-white/90 border border-slate-200/60 rounded-xl px-3 py-2 shadow-sm hover:shadow-md transition-shadow\">\n                    <button \n                      className=\"text-sm text-slate-700 truncate max-w-[200px] hover:text-blue-600 transition-colors\" \n                      title={prompt} \n                      onClick={() => { setChatInput(prompt); handleFindTools(prompt); }}\n                    >\n                      {prompt}\n                    </button>\n                    <button \n                      className=\"ml-2 text-slate-400 hover:text-red-500 transition-colors p-1\" \n                      onClick={() => removeRecent(prompt)} \n                      aria-label=\"remove\" \n                      title=\"Remove\"\n                    >\n                      <X className=\"w-3 h-3\" />\n                    </button>\n                  </div>\n                ))}\n              </div>\n            </div>\n          )}\n\n          {/* Status Messages */}\n          {error && (\n            <div className=\"text-red-600 font-medium mb-6 p-4 bg-red-50 rounded-2xl border border-red-200 max-w-2xl mx-auto\">\n              {error}\n            </div>\n          )}\n          {loading && (\n            <div className=\"text-blue-600 font-medium mb-6 p-4 bg-blue-50 rounded-2xl border border-blue-200 max-w-2xl mx-auto\">\n              {t('loading')}\n            </div>\n          )}\n        </section>\n\n        {/* Search and Filters */}\n        {filteredGroups.length > 0 && (\n          <section className=\"mb-12\">\n            <div className=\"flex flex-col sm:flex-row gap-4 mb-6\">\n              <div className=\"relative flex-1\">\n                <Search className=\"absolute left-4 top-1/2 transform -translate-y-1/2 text-slate-400 w-5 h-5\" />\n                <Input\n                  placeholder={t('searchPlaceholder')}\n                  value={searchQuery}\n                  onChange={(e) => setSearchQuery(e.target.value)}\n                  className=\"pl-12 bg-white/80 border-slate-200/50 h-12 rounded-2xl backdrop-blur-sm font-medium\"\n                />\n              </div>\n              <label className=\"inline-flex items-center gap-2 text-slate-700 bg-white/80 border border-slate-200/50 rounded-2xl px-4 h-12 whitespace-nowrap\">\n                <input \n                  type=\"checkbox\" \n                  checked={showFavsOnly} \n                  onChange={(e) => setShowFavsOnly(e.target.checked)} \n                  className=\"accent-blue-600 w-4 h-4\" \n                />\n                <span className=\"text-sm font-medium\">{t('favoritesOnly')}</span>\n                <span className=\"text-xs text-slate-400\">({favCount})</span>\n              </label>\n            </div>\n          </section>\n        )}\n\n        {/* Visual Plan */}\n        {filteredGroups.length > 0 && (\n          <section className=\"mb-16\">\n            <div className=\"flex items-center gap-3 mb-8\">\n              <div className=\"w-10 h-10 bg-gradient-to-br from-purple-500 to-indigo-600 rounded-2xl flex items-center justify-center shadow-lg shadow-purple-500/25\">\n                <Wand2 className=\"w-5 h-5 text-white\" />\n              </div>\n              <div>\n                <h2 className=\"text-2xl text-slate-800 font-bold\">{t('journeyTitle')}</h2>\n                <p className=\"text-slate-600 text-sm\">{t('journeySubtitle')}</p>\n              </div>\n            </div>\n            <PlanMindMap\n              goal={lastGoal || chatInput}\n              steps={filteredGroups}\n              onOpenTool={handleOpenTool}\n              language={language}\n              buildPrompt={buildPromptCallback}\n            />\n          </section>\n        )}\n\n        {/* Empty states */}\n        {filteredGroups.length === 0 && !loading && groups.length === 0 && (\n          <div className=\"text-center py-20\">\n            <div className=\"w-20 h-20 bg-slate-100 rounded-3xl flex items-center justify-center mx-auto mb-6\">\n              <Sparkles className=\"w-10 h-10 text-slate-400\" />\n            </div>\n            <h3 className=\"text-slate-800 mb-3 font-bold text-xl\">{t('readyTitle')}</h3>\n            <p className=\"text-slate-600\">{t('readySubtitle')}</p>\n          </div>\n        )}\n\n        {filteredGroups.length === 0 && !loading && groups.length > 0 && (\n          <div className=\"text-center py-16\">\n            <div className=\"w-20 h-20 bg-slate-100 rounded-3xl flex items-center justify-center mx-auto mb-6\">\n              <Search className=\"w-10 h-10 text-slate-400\" />\n            </div>\n            <h3 className=\"text-slate-800 mb-3 font-bold text-xl\">{t('noToolsTitle')}</h3>\n            <p className=\"text-slate-600\">{t('noToolsSubtitle')}</p>\n          </div>\n        )}\n      </main>\n    );\n  }\n\n  // Favorites View Component\n  function FavoritesView() {\n    return (\n      <main className=\"max-w-6xl mx-auto px-4 py-8 pb-24 md:pb-12\">\n        <div className=\"flex items-center justify-between mb-8\">\n          <div className=\"flex items-center gap-3\">\n            <button onClick={goHome} className=\"inline-flex items-center gap-2 text-slate-600 hover:text-blue-600 transition-colors p-2 -ml-2 rounded-xl\">\n              <ArrowLeft className=\"w-4 h-4\" />\n              <span className=\"font-medium\">{t('back')}</span>\n            </button>\n            <div className=\"w-px h-6 bg-slate-300\" />\n            <h1 className=\"text-2xl text-slate-800 font-bold\">{t('myFavorites')}</h1>\n          </div>\n          <span className=\"text-slate-500 font-medium bg-slate-100 px-3 py-1 rounded-full text-sm\">\n            {favCount} {t('savedCount')}\n          </span>\n        </div>\n\n        {favCount === 0 ? (\n          <div className=\"text-center py-20\">\n            <div className=\"w-20 h-20 bg-slate-100 rounded-3xl flex items-center justify-center mx-auto mb-6\">\n              <Star className=\"w-10 h-10 text-slate-400\" />\n            </div>\n            <h3 className=\"text-slate-800 mb-3 font-bold text-xl\">{t('noFavoritesTitle')}</h3>\n            <p className=\"text-slate-600 mb-8\">{t('noFavoritesSubtitle')}</p>\n            <Button onClick={goHome} className=\"bg-gradient-to-r from-blue-600 to-indigo-600\">\n              {t('discoverTools')}\n            </Button>\n          </div>\n        ) : (\n          <div className=\"grid sm:grid-cols-2 lg:grid-cols-3 gap-6\">\n            {Array.from(favs.values()).map((tool) => (\n              <ToolCard \n                key={`fav-${tool.name}`} \n                tool={tool} \n                isFav={true} \n                onToggleFav={() => toggleFav(tool)} \n              />\n            ))}\n          </div>\n        )}\n      </main>\n    );\n  }\n\n  // Tool Card Component (used in FavoritesView)\n  function ToolCard({ tool, isFav, onToggleFav }: { tool: Tool | FavTool; isFav: boolean; onToggleFav: () => void }) {\n    return (\n      <Card className=\"border-slate-200/50 hover:shadow-xl transition-all duration-300 hover:-translate-y-1 bg-white/90 backdrop-blur-sm group\">\n        <CardContent className=\"p-6\">\n          <div className=\"flex items-start justify-between mb-4\">\n            <div className=\"w-14 h-14 rounded-2xl overflow-hidden bg-gradient-to-br from-blue-400 to-indigo-500 flex items-center justify-center shadow-lg group-hover:scale-105 transition-transform duration-300\">\n              {'icon' in tool && (tool as any).icon ? (\n                <img\n                  src={(tool as any).icon}\n                  alt={tool.name}\n                  className=\"w-8 h-8 object-contain\"\n                  loading=\"lazy\"\n                  referrerPolicy=\"no-referrer\"\n                  onError={(e) => {\n                    const img = e.currentTarget as HTMLImageElement;\n                    img.onerror = null;\n                    img.style.display = 'none';\n                  }}\n                />\n              ) : (\n                <Sparkles className=\"w-7 h-7 text-white\" />\n              )}\n            </div>\n\n            <button\n              onClick={onToggleFav}\n              className={`flex items-center gap-1 px-3 py-1.5 rounded-xl border transition-all ${\n                isFav \n                  ? 'bg-yellow-100 border-yellow-200 text-yellow-700 hover:bg-yellow-200' \n                  : 'bg-white border-slate-200 text-slate-500 hover:bg-slate-50 hover:border-slate-300'\n              }`}\n              title={isFav ? t('removeFromFavorites') : t('addToFavorites')}\n            >\n              <Star className={`w-4 h-4 ${isFav ? 'fill-current' : ''}`} />\n              <span className=\"text-sm font-medium hidden sm:inline\">\n                {isFav ? t('saved') : t('save')}\n              </span>\n            </button>\n          </div>\n\n          <h3 className=\"text-slate-800 mb-3 font-bold text-lg leading-tight\">{tool.name}</h3>\n          \n          <div className=\"flex gap-2 mb-5\">\n            <Badge variant=\"secondary\" className=\"text-xs bg-blue-100 text-blue-700 font-medium px-2 py-1\">\n              {t('aiTool')}\n            </Badge>\n            <Badge variant=\"secondary\" className=\"text-xs font-medium px-2 py-1 bg-emerald-100 text-emerald-700\">\n              {t('free')}\n            </Badge>\n          </div>\n\n          {'link' in tool && (tool as any).link ? (\n            <a\n              href={(tool as any).link}\n              target=\"_blank\"\n              rel=\"noreferrer noopener\"\n              className=\"block w-full text-center bg-gradient-to-r from-red-500 to-pink-500 hover:from-red-600 hover:to-pink-600 text-white rounded-2xl h-11 leading-[44px] font-medium shadow-lg shadow-red-500/25 transition-all duration-200\"\n            >\n              {t('openTool')}\n            </a>\n          ) : (\n            <Button disabled className=\"w-full rounded-2xl h-11 bg-slate-100 text-slate-400\">\n              {t('noLink')}\n            </Button>\n          )}\n        </CardContent>\n      </Card>\n    );\n  }\n\n  // Categories View Component\n  function CategoriesView() {\n    const [searchQuery, setSearchQuery] = useState('');\n    const [loading, setLoading] = useState(true);\n\n    // Categories data based on comprehensive AI tools research\n    const categories = [\n      {\n        id: 'assistants-productivity',\n        label: language === 'bg' ? 'Асистенти и продуктивност' : 'Assistants & Productivity',\n        emoji: '🤖',\n        description: language === 'bg' ? 'Умни помощници и инструменти за повишаване на продуктивността' : 'Smart assistants and productivity enhancement tools',\n        count: 48,\n        gradient: 'from-blue-500 to-indigo-600'\n      },\n      {\n        id: 'text-writing',\n        label: language === 'bg' ? 'Генерация на текст и писане' : 'Text Generation & Writing',\n        emoji: '✍️',\n        description: language === 'bg' ? 'Създаване, редактиране и подобряване на текстово съдържание' : 'Creating, editing and improving written content',\n        count: 42,\n        gradient: 'from-emerald-500 to-teal-600'\n      },\n      {\n        id: 'images-design',\n        label: language === 'bg' ? 'Изображения и дизайн' : 'Images & Design',\n        emoji: '🎨',\n        description: language === 'bg' ? 'Генериране, редактиране и дизайн на визуално съдържание' : 'Generate, edit and design visual content',\n        count: 39,\n        gradient: 'from-purple-500 to-pink-600'\n      },\n      {\n        id: 'video-3d',\n        label: language === 'bg' ? 'Видео и 3D' : 'Video & 3D',\n        emoji: '🎬',\n        description: language === 'bg' ? 'Създаване и редактиране на видео и 3D съдържание' : 'Create and edit video and 3D content',\n        count: 35,\n        gradient: 'from-red-500 to-orange-600'\n      },\n      {\n        id: 'audio-music',\n        label: language === 'bg' ? 'Аудио и музика' : 'Audio & Music',\n        emoji: '🎵',\n        description: language === 'bg' ? 'Генериране на звук, музика и гласови записи' : 'Generate sound, music and voice recordings',\n        count: 28,\n        gradient: 'from-amber-500 to-yellow-600'\n      },\n      {\n        id: 'business-marketing',\n        label: language === 'bg' ? 'Бизнес, маркетинг и социални медии' : 'Business, Marketing & Social Media',\n        emoji: '📈',\n        description: language === 'bg' ? 'Инструменти за бизнес, маркетинг и социални мрежи' : 'Tools for business, marketing and social networks',\n        count: 44,\n        gradient: 'from-cyan-500 to-blue-600'\n      },\n      {\n        id: 'coding-development',\n        label: language === 'bg' ? 'Кодиране и разработка' : 'Coding & Development',\n        emoji: '💻',\n        description: language === 'bg' ? 'Помощници за програмиране и разработка на софтуер' : 'Programming assistants and software development',\n        count: 33,\n        gradient: 'from-slate-600 to-gray-700'\n      },\n      {\n        id: 'automation-agents',\n        label: language === 'bg' ? 'Автоматизация и агенти' : 'Automation & AI Agents',\n        emoji: '⚡',\n        description: language === 'bg' ? 'Автоматизация на процеси и интелигентни AI агенти' : 'Process automation and intelligent AI agents',\n        count: 26,\n        gradient: 'from-violet-500 to-purple-600'\n      },\n      {\n        id: 'data-analysis',\n        label: language === 'bg' ? 'Данни и анализ' : 'Data & Analysis',\n        emoji: '📊',\n        description: language === 'bg' ? 'Анализ на данни и бизнес аналитика' : 'Data analysis and business intelligence',\n        count: 31,\n        gradient: 'from-teal-600 to-emerald-700'\n      },\n      {\n        id: 'education-learning',\n        label: language === 'bg' ? 'Образование и обучение' : 'Education & Learning',\n        emoji: '🎓',\n        description: language === 'bg' ? 'Инструменти за учене и образователни помощници' : 'Learning tools and educational assistants',\n        count: 23,\n        gradient: 'from-indigo-500 to-blue-600'\n      },\n      {\n        id: 'health-wellness',\n        label: language === 'bg' ? 'Здраве и благополучие' : 'Health & Wellness',\n        emoji: '🏥',\n        description: language === 'bg' ? 'AI решения за здраве и лична стност развитие' : 'AI solutions for health and personal development',\n        count: 19,\n        gradient: 'from-green-500 to-emerald-600'\n      },\n      {\n        id: 'specialized-niche',\n        label: language === 'bg' ? 'Специализирани/нишови' : 'Specialized & Niche',\n        emoji: '🎯',\n        description: language === 'bg' ? 'Специални инструменти за конкретни области и професии' : 'Special tools for specific fields and professions',\n        count: 27,\n        gradient: 'from-rose-500 to-pink-600'\n      }\n    ];\n\n    // Filter categories based on search\n    const filteredCategories = categories.filter(category =>\n      category.label.toLowerCase().includes(searchQuery.toLowerCase()) ||\n      category.description.toLowerCase().includes(searchQuery.toLowerCase())\n    );\n\n    useEffect(() => {\n      // Simulate loading\n      setTimeout(() => setLoading(false), 500);\n    }, []);\n\n    return (\n      <main className=\"max-w-6xl mx-auto px-4 py-8 pb-24 md:pb-12\">\n        {/* Header */}\n        <div className=\"flex items-center justify-between mb-8\">\n          <div className=\"flex items-center gap-3\">\n            <button onClick={goHome} className=\"inline-flex items-center gap-2 text-slate-600 hover:text-blue-600 transition-colors p-2 -ml-2 rounded-xl\">\n              <ArrowLeft className=\"w-4 h-4\" />\n              <span className=\"font-medium\">{t('back')}</span>\n            </button>\n            <div className=\"w-px h-6 bg-slate-300\" />\n            <div>\n              <h1 className=\"text-3xl text-slate-800 font-bold\">{t('categoriesTitle')}</h1>\n              <p className=\"text-slate-600 text-sm mt-1\">{t('categoriesSubtitle')}</p>\n            </div>\n          </div>\n        </div>\n\n        {/* Search */}\n        <div className=\"mb-8\">\n          <div className=\"relative max-w-md\">\n            <Search className=\"absolute left-4 top-1/2 transform -translate-y-1/2 text-slate-400 w-5 h-5\" />\n            <Input\n              placeholder={t('searchCategories')}\n              value={searchQuery}\n              onChange={(e) => setSearchQuery(e.target.value)}\n              className=\"pl-12 bg-white/80 border-slate-200/50 h-12 rounded-2xl backdrop-blur-sm font-medium\"\n            />\n          </div>\n        </div>\n\n        {/* Categories Grid */}\n        {loading ? (\n          <div className=\"grid sm:grid-cols-2 lg:grid-cols-3 gap-6\">\n            {Array.from({ length: 9 }).map((_, i) => (\n              <div key={i} className=\"h-40 bg-slate-100 rounded-3xl animate-pulse\" />\n            ))}\n          </div>\n        ) : (\n          <div className=\"grid sm:grid-cols-2 lg:grid-cols-3 gap-6\">\n            {filteredCategories.map((category) => (\n              <Card \n                key={category.id} \n                className=\"group border-slate-200/50 hover:shadow-2xl transition-all duration-300 hover:-translate-y-2 bg-white/90 backdrop-blur-sm cursor-pointer overflow-hidden\"\n                onClick={() => {\n                  // For now, just simulate category click - you can extend this to show tools in category\n                  console.log(`Clicked category: ${category.id}`);\n                }}\n              >\n                <CardContent className=\"p-6 relative\">\n                  {/* Background gradient */}\n                  <div className={`absolute inset-0 bg-gradient-to-br ${category.gradient} opacity-5 group-hover:opacity-10 transition-opacity duration-300`} />\n                  \n                  {/* Content */}\n                  <div className=\"relative\">\n                    <div className=\"flex items-start justify-between mb-4\">\n                      <div className={`w-16 h-16 rounded-3xl bg-gradient-to-br ${category.gradient} flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform duration-300`}>\n                        <span className=\"text-2xl\">{category.emoji}</span>\n                      </div>\n                      <div className=\"text-right\">\n                        <div className=\"text-xs text-slate-500\">{category.count}</div>\n                        <div className=\"text-xs text-slate-400\">{t('toolsInCategory')}</div>\n                      </div>\n                    </div>\n\n                    <h3 className=\"text-xl font-bold text-slate-800 mb-2 group-hover:text-slate-900 transition-colors\">\n                      {category.label}\n                    </h3>\n                    \n                    <p className=\"text-sm text-slate-600 mb-4 leading-relaxed\">\n                      {category.description}\n                    </p>\n\n                    <div className=\"flex items-center justify-between\">\n                      <Badge \n                        variant=\"secondary\" \n                        className={`text-xs font-medium px-3 py-1 bg-gradient-to-r ${category.gradient} text-white border-0`}\n                      >\n                        {t('browseCategory')}\n                      </Badge>\n                      <ArrowLeft className=\"w-4 h-4 text-slate-400 rotate-180 group-hover:translate-x-1 transition-transform duration-300\" />\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n            ))}\n          </div>\n        )}\n\n        {/* Empty state */}\n        {!loading && filteredCategories.length === 0 && (\n          <div className=\"text-center py-20\">\n            <div className=\"w-20 h-20 bg-slate-100 rounded-3xl flex items-center justify-center mx-auto mb-6\">\n              <Search className=\"w-10 h-10 text-slate-400\" />\n            </div>\n            <h3 className=\"text-slate-800 mb-3 font-bold text-xl\">{t('noToolsTitle')}</h3>\n            <p className=\"text-slate-600\">{t('noToolsSubtitle')}</p>\n          </div>\n        )}\n\n        {/* Stats */}\n        <div className=\"mt-12 text-center\">\n          <div className=\"inline-flex items-center gap-6 bg-white/80 border border-slate-200/50 rounded-2xl px-6 py-4 backdrop-blur-sm\">\n            <div className=\"text-center\">\n              <div className=\"text-2xl font-bold text-slate-800\">{filteredCategories.length}</div>\n              <div className=\"text-xs text-slate-500\">{t('totalCategories')}</div>\n            </div>\n            <div className=\"w-px h-8 bg-slate-300\" />\n            <div className=\"text-center\">\n              <div className=\"text-2xl font-bold text-slate-800\">\n                {filteredCategories.reduce((total, cat) => total + cat.count, 0)}\n              </div>\n              <div className=\"text-xs text-slate-500\">{t('totalTools')}</div>\n            </div>\n          </div>\n        </div>\n      </main>\n    );\n  }\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}